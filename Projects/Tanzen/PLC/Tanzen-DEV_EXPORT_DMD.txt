// Options: Export entire program; Code Block delimiter instructions;
// Unformatted Rung Comments; Element Documentation Database;
// System Configuration; Memory Configuration/Devices with Built-In Types and User Add-Ons;
// use Element names (no NickNames); rung/address annotations;
// <TAB> parameter delimiter; 
// Write/overwrite file C:\Users\kwmor\Documents\BTC-IC\Projects\Tanzen\PLC\Tanzen-DEV_EXPORT_DMD.txt

PLC H2-DM1E

// Do not modify SYS_CONFIG block!
#BEGIN SYS_CONFIG
f4a7c2c144d77e0e37c5d4ef3f98e33a6ebe098ba6c7e2c839b20c5f8347ecacd20f68910334ee27
1fac683224701e9e7870c3b18795174217918c43a43b038c557644e8f4d66add91aac18ad5aa027c
ebac54b3b26e06570ff552d3c27d1d79f527c2fb5c0578f28c9d9120f946f1dc74e5bfdbcf519f92
f2cbf984995e514418e548adac25a9f46d000e5d2636b348d0d57a6f321c1e2c416401b220acf934
eac58dfadc260aabdf096f68768f5261c80227d9fd824ddc28c899828013b5d9e7da0d5addfaefd4
7387d4303a16f5a565641b05a33c1172cf375e572413548a51f3892cabec56867338c3d0493297c2
f29c475431e73e1101f0a6117c5c6da80cae839d68c4103d9196f3fdd792eb3e8b05d030267dce99
bca5e63307778e142d9b6842312ce2868fb83c0be4dae115b457d1bdb91233f9328e085f7e7ef033
8de3139dbe5d8656cd79e706c82c29c7bda62856c09c5c0e4e22641a8175320c69e5e56fc72c98a7
b576be6e5930d4e0c5ba439d3cee5561f81d4bedb15ae34e52fab997528b28d8be6bc46435478589
8ad55eed07581c79ee47f5443ca37ee219de7ee3ea8273abfd23a0a76e9e02017b2427e0059af9c1
7c5a95cb0574036357167c7257970f019979ceba2f42e4277ac4768396809b249061593833dd93d1
e85741478aa9f166dc1050735027450138d3956cc4d940956ea6ec1f6996433560f5f8afeca70429
c68872098ce9b67290449f086357d596c802d5e61b6304dfd4a417c742e05bbc272033ba5d7e3e50
a10279edbbb3991fc848862a27c65e309fc5befc081f9470065b8e4665407cfa4fa2233405669b5c
6211aee6647f89d8af7619c325ef23ecb7a59838cbfb4998d7f121ae34ddc284c1e2cce32679016d
bc13a4eba96fb65fea97c9b2fa8138f35d1089ee1b37cf1c5a4dfb65881d313f34761aec8e5d90fa
55e1b21f614419a9baf5634a8bd5fc16ead8165b4688193c754a6dbe70d383ba4b5b3668583442cd
2878faa69ee2e8f1452e345e4d559b47b0da02b73692fef09b1387776c0cfacb4124d63fa9ee23d6
5b6aabaf6d2dc252d575bf2cba4dce196a181a3b7df0d6ee5ef8ba1eceb890e4ebd1fbb6d00f246d
45ac3dd89f5d4377158447bf910398f0cc1cf8b2f20a7eaa62b7309a7d9021b57520168271ef02ea
a51b99e119602eb84175d3aca6c55702b2c4a67dd02fe385968469a89900096485f57375d3a4aec5
4856cc29dca391104f3bebcb705ff8c6294d6696846c42af29ff29c7fe10378f349605bacf39013f
73a511efce81342981b8c619941c6b40966e7d2d55252fa540e53816ea0dd5681aa135217135702e
31c01878cdaebbe78ec45bc7a8a4a689ff71f0ffc7afa7ff8ab9027d961a24238539d52e0458d45c
17f8f1bd1c06cc8dc86ac2ffa5d778db2015f39ed2c0ad94e97a26a9b6e4733079b0ebdc63681cf8
6e7e0fc93d7cc6d3bf80b58a5ac7d55ce44f3aac476f1c87d258e34fb1dbef009c1eb03c109080ca
d4287510e961b5661e97b68cc4a0b1ea6e56039eb6048cb3e42571778f80cae9b6e59bf196f5cfcd
5b7a28015689121fcf1cfb84160f2f0aa4d7d493280eb5ebead28e6ba910b7b62b81b18cfe1ac224
b2a39449458ae93958ae152df95a68d1dfd699af83b75ffe4851df08aa27bce6b57aea75352a761d
3842feb0a1f35dfd6b0104d3f3a6d9eef5b3bf3f7f46ba2d529e68acb65bcde3b15f033e8e7be05b
4dd49da8c28ff63bcd0913e87e0c58aceea86069ec79d79023563c7108c533f76dccf73f9782f7c6
2d0c2906e9bde9a7c7c25e6e54ac9fbe38b125d7f631a4b1d3556b5543f4dc3347dd7ce612ba0db6
9a084f15d3585f3c0a6162764a39cac7939e33f0cf8db6af349df8571cb40b84ebd5aec87c761c2f
79c312ff948b062b75687e414105392c047888d3e949aaf2d209a2013b94d83dc5eca67cd020b714
7a7239a14296c56dfd5d0bc9caf1f4959704ac1b7df8fdbf7a5456402708b872acd54f49d5c37cbe
d63fe63d5053f0abdb77b0cc9ce0fcd7c761ae5851515b1861485c8adf76c3ecedf1000393bb75fd
7fe781e027fe788cd88e7978b03b81f7edc5b38bc6475f5ef46711e8a3c5839e01a5795c8aa61967
7df70088e6401d872e1c2646e0aced246f6e2a160bc7c42b767ffa810eb768e823fff3c00864c29b
10ba51376f62ccdf7ba243ab1dc3b9fb927c5fe44c2bcc8dd899f71197d77fd8ba9c002b075ae6c5
4c48ddff90b2f793343885f89831037e5d7bd816ba58f9f20504182441cde9fe0c0c7c6c1a985e73
9bf237558fa8a30503d9913f699559c580992ea722008cfc162b4faf10381cb57fc414f6f27c8382
f44612cb6b0d8cb2e099afcef3402e79db747513bfda94e55ecb354519ed49334002b16e65658463
6de2f47783894b0bf633ddcf84e2f667b951c20071b31a39817fd9e294f2ef8f1b57d8c180375a89
0d212c3b81814989914466cea4018941a0f5c96695b4a815c89a097647bd1be79840e0b6372d7f24
342a8c6ab0aa4434f8aec8d8a4e6d3ae1aed4acb2ed56096041dabc81d22a98176b9963fdae8dedb
b6ae92038e70250ba314d01420d9a7cd05e1705c720bdb65675823afa83fa740c84f15b42106673d
0192951627592278ef28620f1f086bcd65ae1fad800a9e1dbc28384ce6def42a13b1105ee686ac3a
184c1f003e2b0cc50aa568624963a0dc51a13970d93b81adab521e778e5cbd2611db5a7f26e32946
4b5479a7c935ed7ddad1706b39b6b0252b273d8194c741b9cd2936985109a448c278581a37a0dd5b
dcf0bb741b66844c680d9b14a8a786b706539b3d9b18e04646df069b867eff62312e9a3e7c340895
51ede431d8bf74e63938f5b7413652cf087a548a6a420539f1f4586358ec29b82b6cdfeee6f51e02
b3dd1b6c73f8143e21cedf2da4746fabdf07139adf96d05ccbe86319b1ffbc235ed719218ffff4bb
965d7e775516a8463e110f4918d4e96ba04c3c74a330f5b35de04a03ade7939d529e903e1caf2154
8b6aaa141d324322d35b4717e286fd375cf77dab7629ebd6f10735910aba2f430bfde8ab33db827b
0e587d17160efdd7f31ebf536ecca4d8c92366e72f446ec8f78d8503a0de2ac171e08bcbde60524a
58a0f3d045fcea2979f9c3a9bb5c5a1669d3970e20b3f9fa92ec397019f47d3b43e26a338a3fb448
2f1a6910fc64ac94b66d9745f2ae1ec45e8a03b5cd44e7ece683f10303a4e9698141351b2995adfc
df4a734f208caf049fc4040953f91bc5239674872b81a8edc4eae73a9aa0b54db95a52139cf37887
b517fd6f0c6acbe9ee0afd554977b6ef2134de0e421da4923d0f6384fb910b8d7e6c85a595c780e7
fa6d49e0235b41965492ed4053bfad094a4036bd5dc979fcc2f8daa9265bd8a7a044239939c3a48a
948e6b740d326fbd72a4b358f267e7451324d71b0d924e6d0b601684bbcca44a178373f7bb2eafb3
896b0adf447055bf7f516490a148cb35af44a3979593895c7552c6ba86e8c742f7578b4ab3dfa616
b03cb44c5e6eb705f418f28d30ac3d76d4681db2f492f12d15e53f1518a8b1106f688067a7525d03
63212a9a70b082b775ba6c7bf05abd97dffa7a59819708d48beda8208d269089b0efbb8f5a76df81
5fa23b1a0b0a8cfb8d02e34416313250c535814c3f54b7ce05f67244929019f606b111eb0c210b58
e802c2e7bae287bbdfff850c21a9485fcd9fc5cf6ee3198d4a2704b929e9033d6be05ed088d18cbe
74596bd7984d190642fb9ea2c67e04b56116a72e3d092ce8b76cfe03c105b111cd2c752802e7de81
4a01a13b3eb6852131b18b45c1a93a7913767876362f5576cb4ce4f13079384076789bae2940c902
7e0e6cdb609c696638387a0fe9960dcfc977eeade13aa023f68130a1f34ca5054dc3d50f79ebd44b
624f22b38bde1ba7f52edf108a91a296730c972d6855cc8fc3805b33b6944b0b99cbb8e7b3877884
053f896fb70681be686a03e01d85707f210143f2e8e85be2073b60c8576a885bbb93347e15b92506
4763560d533dde305f005980567aba0bc0798c58eef86adb67f77348fc3f001beee670f975350d63
c31465f736c72210ff0f24add34ab10b162ce66adb6ecf63c5ac121f8f79f717186209b1bc165fb8
a95fcd49b131e7d504ad1b4c28ca8dd663cb99e11206825003dd7f8be38371807e94715957a45015
8a4d23dc110a15a344f484061dc8330bc3ce80e13d88bd122c227511033cf73ef9d4157b1c91c16d
70426013dca939f6004a81fa21b98aa441b7eeb76a15d9c99d64477a7b173f11e435977d9a8fa519
ad67a795a004b8fbb68d147f96e04a841653d86b8020e26fff54497b99e03540d01fe90b80e0d66f
66060571c55302e9c138bae770b89d5a465707e9a93909af6277f8c05e7f44e975b26aad42a0ebf8
80054334b63d184b81ae820ddcd24cef2147d56ed5f464b4fda14a2d642cf1abbb64dbcc80e627f1
309269dabef6d32c269284fce68b3b57d9227ba62c3731ed4f22fae3fe590cf0cd437c572ca513e5
3bb7bbc5270b6277355112c67a95b9eb5de70abaf800b8d357cb3d035f4a189835ab7c8b095610a1
8fecd42f7cf627bcfb7e00963d60670098152081dddcd91e296ebddcbd0a7717fec64665597f16c6
0d818da24a7225fd0d17a14a9c0281da059e3e0fee89a1e944c4926e7a2cdeb505d47a97f7ac60a9
966df2e7da85f6f01041aeb22232ba7d0b64e559b58b90f47350bf8a8642ca7e74f240e50f265f20
51d9b04fa63469e5d0d6b08410a0092f417d08b5200af00a1a4c0c7e69f9364afec85c14074e84fa
9b55f24542417bedadd784822b802756054d5e17dd8b1441ece5fb6ea92d353b3cc565041e968c73
3e02231971d7b85ea33b974c060779a2bd0b42a8fb19087248d28b04df52954ce18e015a21a419b3
0f73a7d3af3e08c9d499b2b9ba4a305a33e4f774193f2b9c76e1add7a4921c392dedadfadf0b8510
bd6140c302254613ee0139a388aff4874243a09644a6a4809ef37349bcef632a17f3fc7240ac8975
ad4eac38e612f316a731279eeb466dbb0f32c01e341941a96e6f12f658e9a8b4da0a168294a22cdf
ad48a4fe14f355a13a2d98d954561cdaa3c4b4b4ac22eb443a0449f393f0f9cdf1496a9ffe15ec2f
59d53c3e20f03f6097de68efc170675a2ecb6884a85f88ea68f308a7ce9ff92b336967e3a3456f0b
7340e8b8ea91dfcea93d52062b339b882fb13cc42f038c768d4945eb24a67dfdcdcc460de297000b
c7023ea65b008b3baf55b9f2bedf36893bb197c5e8276e9c7f694cb259bedbfa2d589d301dcde52f
925452edd0c03d6770d1a1cce922160e78fdcb76eeb86d5da7d73baa03c3e7331efad55037212b3a
3c7823c1ebe06876cedbe23fbc3042a79b74c8e011b4a29d24026d00d878156ba16e7c832d1528be
8923d5934ad2164f308b1a1a3e122965cde91b5b2b44d9d22302166be73e6c8f875d925e51474ec3
969c16bae39eb1f6eb3b4792b1e20fcdd8bfbd65d439463832e4d77985a95031e3f2bbfdc790e1d2
9295d23e9eb3cce6ec46752614ef5e3601cfb633ff3e6c5e0baa4720a4128439244899186d4b3f63
b1643c57de435c3424376fec6a65b9d9e115f9d29b6d71eacab908dfe5d0b4d3d81e76aa646b013d
5b7fe351a57b742e17a8178ee15e79ece913512bffbb03be9b81fa19078f0c9a7b9bed6e89b3e3d2
fc8b0ad75deed77a5d55ebb63597817be97f5db2381ace8364bc907e309026cd8e5621193cc5d833
2b0654d0a0aac49b157a6645db8c9af594440523791a091f78dfdea88c40e4ae3bebce5b1ae01b2c
b7661d056bca94338689f0fc5f02784a8fccbdbde894f484919d09cd0b450378af4404e83c8113ea
583f62d0c4bfaa265a9ccd8ed03b9099e2db92b1f0aeac45d0430ef90821bd5838ff7a847ae2fe21
47a0624564075977e3e01c92a93ee042cfe29248e790196040a817ea74a891f0d69024dd0999a151
7345383d2305305235e3515c2feb6ec6553460d5fd98de9a7cf9c98d356c489b81e3b57d3048511d
f7b84c2ff848145e18e85644dec6fc6ef461ef8e5d846baf4372bded58022dd5a369560a31dbd2e2
10c1354eb9960c1f591a8ba92ffe10ef710f18bfe7834b8b66c2a266b58ede8359f8c81e99a367eb
590335bdb8a628c1f5f18593f9a35cb54f5b3cb50e39d22e9f92fbc0ff917079628f652e225183ea
14465d2646f37cb77c87c736f22a8cada95f2132ec1f601ade5ee892a4e84cc42666ceae6217cba8
84990e5c1449a87b59d505075bac377af34e97b95c21a6e7a05021f17f735f36414e1089c314d483
3c30aba251bd5099db8263e36a602452aab7811729bda09a7e76eafa03f51ac0957621c8245980e0
82bb376abf980715de8954e52a0343068ef88f141ca998ec1e6a1ce643fa61aa17da4939f45ef470
b821da0c4c285397143679bcb158efec452ec10e696f207463919a8fbb4d3bc144863d79da0d346b
1a6db01f56f84af9fd60383698ba36ae2155156e1dff14c85156b7d002891f42c675063d7f72defe
6a7522913c2ec1b0ee44e904a4b208f7aa8d8a545368564263a64650a5e06531a08c414b121ba28c
e5d8d06e6d48e7273343de376e384f85cce421910d1a61101e1543c5d1fe5477b84b35e702de53c0
eeb914813f8863bed1da5ea7cb9b8be84c48215b961a81875d1510381cd32f21b53f0da68881860c
94d19aad04253cd13f1430d5700102616f77272ada4eced3bde2bb5bad0263f3996695130bc33af3
26c95a2cb78b91e014c4a46f168e175c91cc064453f04cf91bbff20b21df654bde9770b4a75e96e5
e166846a5f7989f6c5bbaf09c3ab7a1bc5c00d442b91b8c04d5b4b64417d42492df05609e62a87f5
7308460acb4e7587c8069366ffc4ba5307c0313a20b58a554d99aef061ba36d6d826f558142adc72
926fc84c6ab9dacb80dde8d0804d2dd53e31857abac96eaf844d24dfb4ea515051fc48dc3ddaa235
877abf1f879e359ef950319b10192af60370c9fac01900f908f503b47ad9946f647cff3ff184bfc7
866d4b589de9ae35e463c8d5089b385528c6fab47dd9a86c4aaa7ee537708a38162824f35f4868cc
0622ad3c229505235d3df08306eec4375fea52824fe3daa84cf20e785db4bbec691c5ef287bc383a
c5402698d6263738e0f583dbd9d7d2444daa5935d49646d9b07aa311b9c98153bd8f79d8078b8db7
a9fc2959c8b094b22809243819e42885953dea7587026dd4523aaae9e654df14313cef9fbffa8255
b9370f207b23519a9564127e6afe4597c6c1a27da3aa7d58a74b1c4ec77b22b668cee28ad37d7733
c60195cecdc44f734116f55f7435369b5d98090528c8b743429151f79fe4eef800acb1e71b5574e5
bdaee3826026f29290d179b98a4068eeeb1a398b44e10aaedf3313351368eceb9a8d3c21d99a2be1
2e747d1cfdb983543b8204122fae6cb93d0208b3cb9fe516537f520dba8a374ffb2cdbc63db523f6
51237a0f5509cd31d0b85ca9b5c3eccb5fd2e74f65b4327b52f4f8f7da6a9b1802d3943a9b86b189
6af7089b32a8f5fb126d4080a92e38fc027cafb42860267b45605a61e1fa62c1c2aa20851e7ab2fe
0d73f7d13190ed7e7daf028fb03695b861c1cc726c0cefab6c7309f3108a3f06486b118bf30a5c03
418fffe0fc1db6de3f1ae505d4ab107316805bb4b8005297ceb7ea6f0ced52ddf888f69c8a5dd774
ed7643e7fe5733e599732112b57c81bfe5fddf588081c5c59e0401e0c24544343cbd723d8cbbbe7d
ea74a3c19e72aeb12aaf10607760ae23bfeddf48c0a299b9ea3a42f954feade2521cfa2685a72bff
5c976ab4ac439fde03a821d47a1253bb9b639901669d0b3923e44ab832db1f9a055cf0c6184127fc
33985d2d06a3b7eb85fb4797bcf4bc53932f41c9bd6403d62abb38401943c67094a9d753a84111b7
ed8410de51dd5723549313d7755ec17ec88b31107f21515d68c1eca847bb99db5822af17442b80f6
8277439265738f2e9a6baa6efb4f6716ed72acdffa554c081baaac095dc32b706b0f36972507e81a
1eb79000afbe19c55dea4443694c8b8799a0e63e7b7df6d9d9333aced2ef9878be095c73426949f8
76eba85ef2bd00bf6e5f6af538f48fd0f55bd67e0a0e512ecbaee8a219bc1a269564201260e41daa
188db703c7819dfd9b75626768ed8b4105d678991b1133be0c53c206a419b12e985c72fb8a4152be
736514fac9e41e5e7d107832e3f7fa9083de4176439dbf2dd6c7b19eb3c52d4a7c8648dcbe81b42f
4bbee8cc8077a30e06f7b80d2fadcafc95a639dacd2f52c2d2f3ffe3eb3087bbdce572f01f6412ee
7a85a58b5c4419e4e6585d69e50987b232d56f0efde7a297a801c378188c8167680d83ebbe5cb043
38aeffe66a94a57e9eec05b8ecf4e43c41accb164723c92b0356ffc3aa4332fd14f00c1a8d8b2655
d4e377def0e4802c4384c792d12e571c02d7231bb6f765352c3c32a643e39a7dc615d909a70b1f7d
199ceecefe2fe90cd4660f0946ae5872a790be3a73c36c8864adbd2ad1b98267f95d923731a2dac7
9418cd463ee14942392ced0bf4349557e413245d29b9971c5a8d592ae9d520067b2d3183dedd10b6
465c9040c6e9d5159c0eceea040584f1a87f23c8d82236999daa60df4b8aa982860a3e8c1a782a72
6837f03802b024c4e7c374e8defc8d140e3d6d014d1a1f4a1f863e2a2a34286ee09450d45bc15126
cde38c2d60a0fb6cc1f267e196c8170f9f7e13d045fa4baaced27762bd82f7feaf714d8eac2334ca
090e3461d8f6d7e35e11f64326c6f3211a544a6c3ce7fd561cc857b997f062af218be609354bb29a
dc1c78c00a6826de20ff4f8f68a3bcf84b3c45a3b08973b226f689b80e964a99630350743d795d6f
52e7bfe6e5b609138ec4ee5a4967310f876be49a30c7c2b58f65ed48b468365b89ad88eaa2b6004f
b88364f7f3a6abd7f3a92b651031c07b7ca45f90830eeccd1fb67797c9e7f7cd2718b0f6f534ebb8
e48ba02d72c552c935d3a9c2c0a7564ad7ad2a57ecaa34024b4da0b3c6667680ea87d7b848548101
fa75641b8cc9df53fee57067e5b7103c3092566fa0fafed97590d4a8c6ea4c2040637a6251b98a16
6908ad907f7d7c47097fbc5899ef0e708c7c4cf7815f8ea7001b210099c1365de16fb655f5466a17
154f8849c506abd77cbd5b054b844f55c3eeed4bd383eddfdf1defe78ba92f09cdfe0de3e6e0e486
f30da886ef426ec30638cecd39e358061b40ac252cf29354e5bce0ca6aa117983917f6308049185f
bee82de269f2f089b2fc1c92f203309823da04f44c1429d6db3da7e3b2fc2a16f34f9031a6f9f9f5
ec209542cdacdbbf3934ed1a630555ce0421547741acb22848f7c614563eb77a6f23fc9710b3ed21
760d57a6b999dc1623e698a50678015802061d9195cab9378f9a2a28cd43cc4a0499b08321167158
dbace70d088e815c9fa5c7e482841a01ccc87f4e107c3460d6528dfafcf97917293611cee105d8ca
d31d6b0b47924269aace5dd263f89ee7d06d24a4b5c527b35db7a231fb737788277aef7d1d40c92d
e30b50d326540db52249090a0729996898e327390564968c204c
#END

#BEGIN DEVICE
	@LocalIOMaster, 12, 27
	@RamFS, 1, 1
	@UserLog, 7, 11
	@IntEthernet, 4, 2
	@DMLogger, 5, 10
	@IntModTCPClient, 9, 14, 1000, 2, 60
	@IntEIPClient, 22, 31, 1000, 2, 60
	@IntEthDMPPClient, 23, 32, 50, 250, 2
	@IntSerial, 10, 15
#END

#BEGIN MEM_CONFIG
	X	BIT	decimal	2048	-1
	Y	BIT	decimal	2048	-1
	WX	SWORD	decimal	256	-1
	WY	SWORD	decimal	256	-1
	C	BIT	decimal	2048
	V	UWORD	decimal	4096
	N	SWORD	decimal	4096
	D	SDWORD	decimal	4096
	R	REAL	decimal	4096
	T	TIMER	decimal	256
	CT	COUNTER	decimal	256
	SS	STRING	decimal	128
	SL	STRING	decimal	64
	UDT	DATETIME	decimal	32
	PL	UWORD	decimal	256
	DLX	BIT	octal	01000	-1
	DLY	BIT	octal	01000	-1
	DLC	BIT	octal	01000
	DLV	UWORD	octal	04000
	MI	BIT	decimal	1024
	MC	BIT	decimal	1024
	MIR	SWORD	decimal	2048
	MHR	SWORD	decimal	2048
	RX	REAL	decimal	256	-1
	RY	REAL	decimal	256	-1
	movement	BIT	decimal	256
	MSG	STRING		0
	ERR	STRING		0
	SysName	STRING		0
	SysDesc	STRING		0
	SerialNum	STRING		0
	PartNum	STRING		0
#END

// Beginning of Code Block $Main
$PRGRM	$Main

// Rung $Main#1
// Offset 0
#BEGIN COMMENT 
"These first two rungs contain the Score and Error Counters. They are incremented separately further into the program."
#END

STR	ST2
STR	ST2
CNT	CT0	0

// Rung $Main#2
// Offset 4
#BEGIN COMMENT 
"These first two rungs contain the Score and Error Counters. They are incremented separately further into the program."
#END

STR	ST2
STR	ST2
CNT	CT1	5

// Rung $Main#3
// Offset 8
#BEGIN COMMENT 
"This rung triggers on the Red Push Button's Rising Edge (One-Shot Rising)."
""
"Rising/Falling Edge contacts don't properly work in Stages, thus it's here."
#END

STRPD	X0
OUT	C10

// Rung $Main#4
// Offset 11
#BEGIN COMMENT 
"This rung triggers on the Green Push Button's Rising Edge (One-Shot Rising)."
""
"Rising/Falling Edge contacts don't properly work in Stages, thus it's here."
#END

STRPD	X1
OUT	C11

// Rung $Main#5
// Offset 14
#BEGIN COMMENT 
"This rung triggers on the Amber Push Button's Rising Edge (One-Shot Rising)."
""
"Rising/Falling Edge contacts don't properly work in Stages, thus it's here."
#END

STRPD	X2
OUT	C12

// Rung $Main#6
// Offset 17
#BEGIN COMMENT 
"The next three rungs generate ""random"" nuimbers ranging between zero and six."
""
"Zero to six include the blank, all the single bit, and all the double bit combinations, but exclude the triple combionation."
""
"This rung energizes C0 as long as at least one button is pressed."
#END

STR	X0
OR	X1
OR	X2
OUT	C0

// Rung $Main#7
// Offset 21
#BEGIN COMMENT 
"This rung times how long C0 is HIGH."
#END

STR	C0
STRPD	C0
TMRA	T0	0

// Rung $Main#8
// Offset 26
#BEGIN COMMENT 
"When C0 switches LOW (all buttons released) this rung stores the remainder of the Button Press time devided by 7."
#END

STRND	C0
MATH	N0	"T0.Acc % 7"

// Rung $Main#9
// Offset 36
#BEGIN COMMENT 
"The Amber Lamp Falling bit is HIGH when the Amber Lamp Output switches LOW."
""
"This is used to count Light Flashes for teh Start and End of the game."
#END

STRND	Y0
OUT	C20

// Rung $Main#10
// Offset 39
#BEGIN COMMENT 
"This rung calculates the On and Off times for the Flasher functions. The On time is currently fixed, though the Off time is discrete based on the LS_Flash (V1:6) bit."
#END

STR	ST1
MATH	V2	"V1:6 * 250"
MATH	V3	"500"

// Rung $Main#11
// Offset 54
#BEGIN COMMENT 
"The next six rungs contain the Flasher functions for the Light Outputs."
""
"The bit asignments for V1 are:"
"(MSB) LS_Flash; LS_RED_BL; LS_GRN_BL; LS_AMB_BL; LS_RED_L; LS_GRN_L; LS_AMB_L (LSB)"
#END

STR	V1:0
FLASHER	V3	V2	Y0

// Rung $Main#12
// Offset 59
STR	V1:1
FLASHER	V3	V2	Y1

// Rung $Main#13
// Offset 64
STR	V1:2
FLASHER	V3	V2	Y2

// Rung $Main#14
// Offset 69
STR	V1:3
FLASHER	V3	V2	Y5

// Rung $Main#15
// Offset 74
STR	V1:4
FLASHER	V3	V2	Y4

// Rung $Main#16
// Offset 79
STR	V1:5
FLASHER	V3	V2	Y3

// Rung $Main#17
// Offset 84
#BEGIN COMMENT 
"The Start Stage - First active stage"
#END

SG	$Main.S0

// Rung $Main#18
// Offset 86
#BEGIN COMMENT 
"Sets the HMI screen to the Start Screen and instructs the Green Button Light (V1:4) to Flash (V1:6)."
#END

STR	ST1
MATH	V9	"1"
MATH	V1	"(2 ** 6) + (2 ** 4)"

// Rung $Main#19
// Offset 105
#BEGIN COMMENT 
"The the Green Push Button is released, or the HMI start button is pressed the Start Stage is deactivated, the Start Up Stage is activated, the HMI screen is changed to the Start Up Screen and the three Lamps (V1:0, V1:1, V1:2) are instructed to Flash (V1:6)."
#END

STRND	X1
OR	C9
JMP	$Main.S1
MATH	V9	"10"
MATH	V1	"(2 ** 6) + (2 ** 2) + (2 ** 1) + (2 ** 0)"

// Rung $Main#20
// Offset 135
#BEGIN COMMENT 
"Holding the Red and Amber Buttons for three seconds enables the High Score Reset Button on teh HMI."
#END

STR	X0
AND	X2
TMR	T1	3000

// Rung $Main#21
// Offset 139
#BEGIN COMMENT 
"Pressing the High Score Reset Button on the HMI resets the High Scores to zero."
#END

STR	T1.Done
AND	C1
MATH	V10	"0"
MATH	V11	"0"
MATH	V12	"0"

// Rung $Main#22
// Offset 159
#BEGIN COMMENT 
"The Start Up Stage - count down to game start."
#END

SG	$Main.S1

// Rung $Main#23
// Offset 161
#BEGIN COMMENT 
"This Counter counts out three Lamp Flashes before triggering the next rung."
#END

STRND	Y0
STR	CT2.Done
CNTDN	CT2	4

// Rung $Main#24
// Offset 166
#BEGIN COMMENT 
"This rung deactivates the Start Up Stage, activates the Play Stage, sets all the Lights to Off, resets the Score and Error Calculators to zero, changes the HMI screen to the Play Screen, and resets the Game Step Duration to two seconds."
#END

STR	CT2.Done
JMP	$Main.S2
MATH	V1	"0"
MATH	CT0.Acc	"0"
MATH	CT1.Acc	"0"
MATH	V9	"20"
MATH	V0	"(1250 / ((CT0.Acc / 2) + 1)) + 750"

// Rung $Main#25
// Offset 206
#BEGIN COMMENT 
"The Play Stage - where ""The Magic"" happens"
#END

SG	$Main.S2

// Rung $Main#26
// Offset 208
#BEGIN COMMENT 
"These three rungs activate the processing stages for their associated buttons being pressed. They DO NOT disable the Play Stage when doing this."
#END

STR	C10
SGSET	$Main.S20

// Rung $Main#27
// Offset 210
STR	C11
SGSET	$Main.S21

// Rung $Main#28
// Offset 212
STR	C12
SGSET	$Main.S22

// Rung $Main#29
// Offset 214
#BEGIN COMMENT 
"This timer initiates all game progression."
""
"It only runs while the Play Stage is active."
""
"It is reset if the Play Stage is deactivated or self-resets when it's preset is reached."
#END

STRN	T20.Done
TMR	T20	V0

// Rung $Main#30
// Offset 217
#BEGIN COMMENT 
"The Step Expired Stage is activated when the Game Step timer completes, and the game's Step Duration is recalculated."
"This DOES NOT disable the Play Stage."
#END

STR	T20.Done
SGSET	$Main.S29
MATH	V0	"((1250 + (CT1.Acc * 100)) / ((CT0.Acc / 2) + 1)) + 750"

// Rung $Main#31
// Offset 237
#BEGIN COMMENT 
"These two rungs keep either Player action flag HIGH for the length of one Flash, then reset them LOW."
#END

STR	C21
OR	C22
ONDTMR	T2	V3	C23

// Rung $Main#32
// Offset 242
STR	C23
RST	C21
RST	C22

// Rung $Main#33
// Offset 245
#BEGIN COMMENT 
"The Step Expired Stage - where ""The Magic"" actually happens"
#END

SG	$Main.S29

// Rung $Main#34
// Offset 247
#BEGIN COMMENT 
"If any of the Button Lights are lit when the Step expires then the Step Expired Stage is deactivated and the Player Error Stage is activated."
#END

STR	V1:3
OR	V1:4
OR	V1:5
JMP	$Main.S99

// Rung $Main#35
// Offset 251
#BEGIN COMMENT 
"When this rung is reached in the scan-cycle the bit values for teh lamps are moved to their respective Button Light bits and any ""extra"" is trimed off."
#END

STR	ST1
MATH	V1	"(V1 << 3) % 64"

// Rung $Main#36
// Offset 262
#BEGIN COMMENT 
"If the RANDal number is negative (no button press since last step expiration) then it is made positive and changed slightly but still kept between zero and six, to produce a ""new"" RANDal number."
#END

STRLT	N0	0
MATH	N0	"(-N0 + 2) % 7"

// Rung $Main#37
// Offset 277
#BEGIN COMMENT 
"If the RANDal number is not negative, its value is wrtten to the bits for the Lamp lights and it is changed slightly and made negative."
""
"Then the Step Expired Stage is deactivated."
#END

STR	ST1
MATH	V1	"V1 | N0"
MATH	N0	"-(N0 + 1)"
SGRST	$Main.S29

// Rung $Main#38
// Offset 296
#BEGIN COMMENT 
"The Red Button Pressed Stage"
#END

SG	$Main.S20

// Rung $Main#39
// Offset 298
#BEGIN COMMENT 
"If the Red Button Light is energized, the Red Pressed Stage is deactivated, the Player Score Stage is activated, and the Red Button Light (V1:5) is instucted to turn off."
#END

STR	Y3
JMP	$Main.S23
MATH	V1	"V1 & ~(2 ** 5)"

// Rung $Main#40
// Offset 311
#BEGIN COMMENT 
"If the Red Button Light is NOT energized, the Red Button Pressed Stage is deactivated and the Player Error Stage is activated."
#END

STRN	Y3
JMP	$Main.S99

// Rung $Main#41
// Offset 313
#BEGIN COMMENT 
"The Green Button Pressed Stage"
#END

SG	$Main.S21

// Rung $Main#42
// Offset 315
#BEGIN COMMENT 
"If the Green Button Light is energized, the Green Pressed Stage is deactivated, the Player Score Stage is activated, and the Green Button Light (V1:4) is instucted to turn off."
#END

STR	Y4
JMP	$Main.S23
MATH	V1	"V1 & ~(2 ** 4)"

// Rung $Main#43
// Offset 328
#BEGIN COMMENT 
"If the Green Button Light is NOT energized, the Green Button Pressed Stage is deactivated and the Player Error Stage is activated."
#END

STRN	Y4
JMP	$Main.S99

// Rung $Main#44
// Offset 330
#BEGIN COMMENT 
"The Amber Button Pressed Stage"
#END

SG	$Main.S22

// Rung $Main#45
// Offset 332
#BEGIN COMMENT 
"If the Amber Button Light is energized, the Amber Pressed Stage is deactivated, the Player Score Stage is activated, and the Amber Button Light (V1:3) is instucted to turn off."
#END

STR	Y5
JMP	$Main.S23
MATH	V1	"V1 & ~(2 ** 3)"

// Rung $Main#46
// Offset 345
#BEGIN COMMENT 
"If the Amber Button Light is NOT energized, the Amber Button Pressed Stage is deactivated and the Player Error Stage is activated."
#END

STRN	Y5
JMP	$Main.S99

// Rung $Main#47
// Offset 347
#BEGIN COMMENT 
"The Player Score Stage - when you're feeling ""The Magic"""
#END

SG	$Main.S23

// Rung $Main#48
// Offset 349
#BEGIN COMMENT 
"The Score count is incremented, the Player Score flag is set HIGH, the Player Erred flag is reset LOW, and the Player Score Stage is deactivated."
#END

STR	ST1
INC	CT0.Acc
SET	C21
RST	C22
SGRST	$Main.S23

// Rung $Main#49
// Offset 354
#BEGIN COMMENT 
"The Player Error Stage - actually, some of ""The Magic"" happens here too!"
#END

SG	$Main.S99

// Rung $Main#50
// Offset 356
#BEGIN COMMENT 
"During the first scan-cycle since the Player Error Stage is activated this rung deactivates the Play Stage (reseting the Step timer), increments the Error counter, instructs the three Lamps (V1:0, V1:1, V1:2) to Flash (V1:6), resets the Player Scored flag LOW, and sets the Player Erred flag HIGH."
#END

STRPD	ST1
SGRST	$Main.S2
INC	CT1.Acc
MATH	V1	"(2 ** 6) + (2 ** 2) + (2 ** 1) + (2 ** 0)"
RST	C21
SET	C22

// Rung $Main#51
// Offset 382
#BEGIN COMMENT 
"When the Amber Lamp finishes its Flash and the Error counter has not reached its preset, this rung instructs the lights to turn off, deactivates the Player Error Stage and activates the Play Stage."
#END

STR	C20
ANDN	CT1.Done
MATH	V1	"0"
JMP	$Main.S2

// Rung $Main#52
// Offset 391
#BEGIN COMMENT 
"When the Amber Lamp finsihes its Flash and the Error counter reached its preset, this rung deactivates the Player Error Stage, activates the End Stage, chages the HMI screen to the Game Over Screen, instructs all three Lamps (V1:0, V1:1, V1:2) to Flash (V1:6), and resets the Error counter to 0."
#END

STR	C20
AND	CT1.Done
JMP	$Main.S3
MATH	V9	"30"
MATH	V1	"(2 ** 6) + (2 ** 2) + (2 ** 1) + (2 ** 0)"
MATH	CT1.Acc	"0"

// Rung $Main#53
// Offset 426
#BEGIN COMMENT 
"The End Stage - Game Over man!"
#END

SG	$Main.S3

// Rung $Main#54
// Offset 428
#BEGIN COMMENT 
"When the End Stage is active this timer counts down. The Math function converts the millisecond value of the counter to seconds for the HMI to display."
#END

STR	ST1
TMRDOWN	T3	10000
MATH	V30	"T3.Acc / 1000"

// Rung $Main#55
// Offset 439
#BEGIN COMMENT 
"This counter counts the number of finished Lamp Flashes. When the accumulated value reaches four, the done bit energizes, reseting the counter on the next scan-cycle."
#END

STRND	Y0
STR	CT3.Done
CNT	CT3	4

// Rung $Main#56
// Offset 444
#BEGIN COMMENT 
"When the counter's done bit is energized the lights are instructed to turn off."
#END

STR	CT3.Done
MATH	V1	"0"

// Rung $Main#57
// Offset 451
#BEGIN COMMENT 
"If the player Score is greater than or equal to the lowest High Score, the High_Score Stage is activated, the Score is written to the lowest High Score, and the High Score Flag is set HIGH."
#END

STRGE	CT0.Acc	V12
ANDN	C30
SGSET	$Main.S30
MATH	V12	"CT0.Acc"
SET	C30

// Rung $Main#58
// Offset 464
#BEGIN COMMENT 
"When the Game Over timer reaches zero, the End Stage is deactivated, the Start Stage is activated, and the High Score Flag is reset LOW."
#END

STR	T3.Done
OR	C39
JMP	$Main.S0
RST	C30

// Rung $Main#59
// Offset 468
#BEGIN COMMENT 
"The High Score Stage - for when you were really feeling ""The Magic"""
#END

SG	$Main.S30

// Rung $Main#60
// Offset 470
#BEGIN COMMENT 
"If the lowest High Score value is greater than the middle High Score value they are swapped."
#END

STRGT	V12	V11
MATH	V11	"V11 + V12"
MATH	V12	"V11 - V12"
MATH	V11	"V11 - V12"

// Rung $Main#61
// Offset 498
#BEGIN COMMENT 
"If the middle High Score value is greater than the highest High Score value they are swapped."
#END

STRGT	V11	V10
MATH	V10	"V10 + V11"
MATH	V11	"V10 - V11"
MATH	V10	"V10 - V11"

// Rung $Main#62
// Offset 526
#BEGIN COMMENT 
"Once the previous rungs are complete, the High Score Stage is deactivated."
#END

STR	ST1
SGRST	$Main.S30

// End of Code Block $Main
$PGMEND	$Main

#BEGIN ELEMENT_DOC
"X0","RED_PB","",""
"X1","GRN_PB","",""
"X2","AMB_PB","",""
"Y0","AMB_L","",""
"Y1","GRN_L","",""
"Y2","RED_L","",""
"Y3","RED_BL","",""
"Y4","GRN_BL","",""
"Y5","AMB_BL","",""
"C0","Button_Pressed","",""
"C1","HMI_HS_Reset","",""
"C9","HMI_Start","",""
"C10","RPB_Rising","",""
"C11","GPB_Rising","",""
"C12","APB_Rising","",""
"C20","AL_Falling","",""
"C21","HMI_Player_Score","",""
"C22","HMI_Player_Erred","",""
"C23","Player_Flag_Clr","",""
"C30","High_Score_Flag","",""
"C39","HMI_End","",""
"C99","Debug","",""
"V0","Step_Duration","",""
"V1","Lights_Set","",""
"V1:0","LS_AMB_L","",""
"V1:1","LS_GRN_L","",""
"V1:2","LS_RED_L","",""
"V1:3","LS_AMB_BL","",""
"V1:4","LS_GRN_BL","",""
"V1:5","LS_RED_BL","",""
"V1:6","LS_Flash","",""
"V2","Flash_Off_Time","",""
"V3","Flash_On_Time","",""
"V9","HMI_Screen","",""
"V10","High_Score_0","",""
"V11","High_Score_1","",""
"V12","High_Score_2","",""
"V30","HMI_End_Timer","",""
"N0","RANDal","",""
"T0","Button_Press","",""
"T0.Acc","Press_Duration","",""
"T1","High_Score_Reset","",""
"T2","Player_Status","",""
"T3","Game_Over_Timer","",""
"T20","Game_Step","",""
"T20.Done","Game_Step_Done","",""
"CT0","Score_Counter","",""
"CT0.Acc","HMI_Score","",""
"CT1","Error_Counter","",""
"CT1.Acc","HMI_Errors","",""
"CT1.Done","Game_Over","",""
"CT2","Startup_Flash","",""
"CT3","Game_Over_Flash","",""
"$Main.S0","Start_Stage","",""
"$Main.S1","StartUp_Stage","",""
"$Main.S2","Play_Stage","",""
"$Main.S3","End_Stage","",""
"$Main.S20","RED_Pressed","",""
"$Main.S21","GRN_Pressed","",""
"$Main.S22","AMB_Pressed","",""
"$Main.S23","Player_Score","",""
"$Main.S29","Step_Expired","",""
"$Main.S30","High_Score_Stage","",""
"$Main.S99","Player_Error","",""
#END

