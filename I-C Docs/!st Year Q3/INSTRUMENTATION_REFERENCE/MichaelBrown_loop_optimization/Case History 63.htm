<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0073)http://www.controlloop.co.za/Articles/Case_History_63/case_history_63.htm -->
<HTML><HEAD><TITLE>Case History 63</TITLE>
<META http-equiv=Content-Type content="text/html; charset=ISO-8859-1">
<META content="MSHTML 6.00.2600.0" name=GENERATOR>
<SCRIPT language=JavaScript src="Case History 63_files/menu.js"></SCRIPT>

<SCRIPT language=JavaScript>
<!--
var controlloop = new MenuBar("controlloop",0,2,0,0,1,1,0,"solid","#CCCCCC","#CCCCCC","#999999","Verdana,Tahoma,Arial,Helvetica",12,"normal","normal","#000000","#FFFFFF","");
var m1_controlloop = new Menu("Home",127,100,"../../default.htm");
controlloop.addMenu(m1_controlloop);
var m2_controlloop = new Menu("Training",127,100,"../../Training/training.htm");
controlloop.addMenu(m2_controlloop);
var m3_controlloop = new Menu("Consulting",127,100,"../../Consulting/consulting.htm");
controlloop.addMenu(m3_controlloop);
var m4_controlloop = new Menu("Protuner",127,100,"../../Protuner/protuner.htm");
controlloop.addMenu(m4_controlloop);
var m5_controlloop = new Menu("Contact us",127,100,"../../Contact_us/contact_us.htm");
controlloop.addMenu(m5_controlloop);
var m6_controlloop = new Menu("Articles",130,100,"../../Articles/articles.htm");
controlloop.addMenu(m6_controlloop);
//-->
</SCRIPT>

<SCRIPT>
<!--
function F_loadRollover(){} function F_roll(){}
//-->
</SCRIPT>

<SCRIPT language=JavaScript1.2 src="Case History 63_files/rollover.js"></SCRIPT>
</HEAD>
<BODY text=#000000 vLink=#990000 link=#cc0000 bgColor=#ffffff leftMargin=0 
topMargin=0 MARGINHEIGHT="0" MARGINWIDTH="0">
<SCRIPT language=JavaScript><!--
controlloop.start();
//--></SCRIPT>

<CENTER>
<TABLE cellSpacing=0 cellPadding=0 width=816 border=0>
  <TBODY>
  <TR vAlign=top align=left>
    <TD vAlign=top align=left width=765 colSpan=5 height=77><IMG id=Picture83 
      height=77 src="Case History 63_files/banneroct2002.jpg" width=765 
    border=0></TD>
    <TD colSpan=2></TD></TR>
  <TR vAlign=top align=left>
    <TD width=20 height=7><IMG height=1 
      src="Case History 63_files/clearpixel.gif" width=20 border=0></TD>
    <TD width=40><IMG height=1 src="Case History 63_files/clearpixel.gif" 
      width=40 border=0></TD>
    <TD width=681><IMG height=1 src="Case History 63_files/clearpixel.gif" 
      width=681 border=0></TD>
    <TD width=11><IMG height=1 src="Case History 63_files/clearpixel.gif" 
      width=11 border=0></TD>
    <TD width=13><IMG height=1 src="Case History 63_files/clearpixel.gif" 
      width=13 border=0></TD>
    <TD width=1><IMG height=1 src="Case History 63_files/clearpixel.gif" 
      width=1 border=0></TD>
    <TD width=50><IMG height=1 src="Case History 63_files/clearpixel.gif" 
      width=50 border=0></TD></TR>
  <TR vAlign=top align=left>
    <TD width=766 colSpan=6 height=24><!--<IMG ID="DynamicMenu2501" HEIGHT=24 WIDTH=766 SRC="../../a_blank.gif" BORDER=0 ALT="DynamicMenu2 5.0">
                #DM2_controlloop# 1:coolPost:1--><NOLAYER>
      <DIV id=MBposcontrolloop 
      style="VISIBILITY: hidden; WIDTH: 766px; HEIGHT: 24px"></DIV></NOLAYER><ILAYER 
      id=MBposcontrolloopL VISIBILITY="hide" WIDTH="766" HEIGHT="24" 
      Z-INDEX="0"></ILAYER></TD>
    <TD></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=9></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=2></TD>
    <TD width=681>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#cc0000>Control Loop 
      Case History 63</FONT>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica>Problems on a plant with no 
      positioners on valves</FONT></B>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>During the two-day 
      practical part of a course held recently in a large South African chemical 
      plant, it was found that none of the valves had positioners on them.&nbsp; 
      This is very unusual in the modern age.
      <P>The primary purpose of a positioner on a spring and diaphragm operated 
      valve is to minimise hysteresis, and to ensure that the valve stem gets 
      reasonably close to the position as requested by the controller output 
      (PD).&nbsp; Hysteresis on valves without a positioner can normally be as 
      high as 3% - 5 %.&nbsp; This figure should be 1% or better when a 
      positioner is used.&nbsp; In the early days, positioners were often 
      thought to lead to instability in fast loops.&nbsp; However in modern 
      times, reputable valve manufacturers ensure that their positioner-valve 
      combinations are stable. 
      <P>The plant where the course was being held had pretty complex processes, 
      which required good controls for optimum performance.&nbsp; As mentioned 
      many times in these articles, good control performance cannot be obtained 
      if valves do not operate properly.&nbsp; This is even more important on 
      slower processes.&nbsp; Therefore it was not surprising to find that the 
      vast majority of the controls analysed during the course were performing 
      dismally.
      <P>The example discussed in this article is a liquid flow control with 
      terribly high valve hysteresis.
      <P>The initial closed loop "as found" test is illustrated in Figure 
      1.&nbsp; </FONT>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica size=-2>Figure 
1</FONT></B>
      <P>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture69 height=396 alt="Figure 1" 
            src="Case History 63_files/cashis63fig1.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>In this type of test, 
      setpoint changes firstly up and then down are performed on the controller, 
      which is in automatic.&nbsp; The control parameters as found in the 
      controller were&nbsp; P = 0.8, and I = 20 seconds/repeat.&nbsp; With 
      experience, one can immediately judge that these are not very good tuning 
      parameters for&nbsp; liquid flow control.&nbsp; 
      <P>At the start of the test it can be seen that the process is not exactly 
      on setpoint, and that the PD (controller output) is also remaining fairly 
      constant.&nbsp; This is an indication confirming that that the Integral 
      setting in the controller is far too slow.&nbsp; The process response to 
      the step-up in setpoint shows an initial fast rise with a little overshoot 
      followed by a slow ramp up to setpoint taking some 3 minutes. This is 
      typical response of a flow loop with too high a Proportional gain, and too 
      slow an Integral setting.
      <P>The step-down in setpoint is very interesting, as it appears to be 
      completely different to the previous response on the way up.&nbsp; Surely 
      a flow loop should have pretty similar responses to setpoint changes up 
      and down?&nbsp; The reason that there is difference is because there is a 
      valve problem.&nbsp; On deeper inspection of the response it can be seen 
      that the controller output dropped immediately on the setpoint change, but 
      the flow did not start moving for nearly 10 seconds.&nbsp; This is far too 
      long to be the normal deadtime of a flow loop, which is generally much 
      less than 2 seconds.&nbsp; This indicates is that there is excessive 
      hysteresis in the valve and that the output of the controller had to drop 
      a certain amount to get the valve to start moving in the reverse 
      direction.&nbsp; In fact the output had to drop nearly 10% before the 
      valve started moving and the only then did the flow started coming 
      down.<BR>The open loop test confirmed the fact the valve did in fact have 
      more than 10% hysteresis.&nbsp; Figure 2 shows a portion of the test where 
      the valve direction is reversed, and it is necessary to move the output 
      just over 10% before the flow starts cutting back.</FONT>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica size=-2>Figure 2 
      </FONT></B>
      <P>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture70 height=410 alt="Figure 2" 
            src="Case History 63_files/cashis63fig2.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>10% hysteresis in a 
      valve is really unacceptable.&nbsp; As mentioned above, a valve without a 
      positioner should not have hysteresis exceeding 3%.&nbsp; So although this 
      valve is really bad, a positioner would have helped to reduce the 
      hysteresis considerably.
      <P>When tuning a process with hysteresis on the valve it is very important 
      that one chooses a step to tune on which represents the true process 
      response, and not one where the size of the response might be affected by 
      hysteresis in the valve.&nbsp; Typically many tuning packages and 
      self-tuning controllers use a single step for the tuning.&nbsp; If that 
      step was the first step after the valve had reversed, a certain amount of 
      the energy supplied by the actuator might actually have been absorbed in 
      getting the valve to move through any hysteresis, thus limiting the size 
      of the response.&nbsp; The tuning parameters obtained from such a step may 
      cause the response in automatic to be too cyclic or even unstable.
      <P>The other thing to remember when tuning a loop with excessive 
      hysteresis in the valve is to choose a response that will result in 
      minimum valve reversals on changes in load or setpoint.&nbsp; If for 
      example, one was to tune for a quarter amplitude damped response, then 
      theoretically the valve would reverse at least 8 times on every setpoint 
      change.&nbsp; If this was to take place on a valve with excessive 
      hysteresis it would literally take many minutes, if not hours, for the 
      controller integrator to reverse the valve each time, as the output has to 
      move fully through the hysteresis band before the valve can move.&nbsp; 
      Therefore it would be preferable to choose a critically damped response, 
      which avoids reversing the valve completely on a setpoint change. 
      <P>As a point of interest, we never advocate quarter amplitude damped 
      tuning for a variety of good reasons.&nbsp; Amongst them are that such a 
      response is too close to instability in real life plant conditions where 
      changes are may frequently occur.&nbsp; Also is it a good idea to reverse 
      a valve 8 times every time you move it?&nbsp; It's certainly going to wear 
      out pretty quickly.&nbsp; Next as mentioned above, if there is hysteresis 
      on a valve (and most valves do have even a little hysteresis), reversing 
      it actually slows down the response and increases control variance.&nbsp; 
      In reality, quarter amplitude damped tuning is not practical.
      <P>Figure 3 illustrates the final closed loop test with tuning of P = 0.2, 
      and I = 1.5 seconds/repeat.&nbsp; </FONT>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica size=-2>Figure 
3</FONT></B>
      <P>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture71 height=395 alt="Figure 3" 
            src="Case History 63_files/cashis63fig3.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The tuning is close 
      to critical damping and the vastly improved response to setpoint changes 
      in both directions can be clearly seen.&nbsp; The response time even with 
      such a relatively slow tune is now only 25 seconds!&nbsp; Note that the 
      new tuning incorporates an integral setting, which is about 14 times 
      faster than the original setting.
      <P>It is quite interesting to observe that even with the slow tune that 
      there was a slight negative overshoot after the setpoint change down, and 
      it can be seen how long it took for the controller output to integrate 
      back up before getting the valve to reverse and hence return the flow to 
      setpoint.
      <P></FONT><A 
      href="index.html"><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>Index to articles</FONT></A>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#000000 
      size=-2>Michael Brown is a specialist in control loop optimisation, with 
      many years of experience in process control instrumentation. His main 
      activities are consulting, and teaching practical control loop analysis 
      and optimisation. He gives training courses which can be held in clients' 
      plants, where students can have the added benefit of practising on live 
      loops. His work takes him to plants all over South Africa, and also to 
      other countries. He can be contacted at: <BR>Tel (011) 486-0567<BR>Fax 
      (011) 646-2385<BR>E-Mail: </FONT><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2></FONT></B><A href="mailto:michael.brown@pixie.co.za"><B><FONT 
      face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>michael.brown@pixie.co.za</FONT></B></A><BR><BR>&nbsp;</P></TD>
    <TD colSpan=4></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=19></TD></TR>
  <TR vAlign=top align=left>
    <TD height=19></TD>
    <TD width=732 colSpan=3>
      <TABLE id=NavigationBar1 cellSpacing=0 cellPadding=1 width=732 border=0>
        <TBODY>
        <TR vAlign=top align=left>
          <TD width=120><A onmouseover="F_roll('NavigationButton205',1)" 
            onmouseout="F_roll('NavigationButton205',0)" 
            href="http://www.controlloop.co.za/default.htm"><IMG 
            id=NavigationButton205 height=19 alt=Home 
            src="Case History 63_files/Home_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Home_NRGUIButtonOver.GIF')" border=0 
            name=NavigationButton205></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton206',1)" 
            onmouseout="F_roll('NavigationButton206',0)" 
            href="http://www.controlloop.co.za/Training/training.htm"><IMG 
            id=NavigationButton206 height=19 alt=Training 
            src="Case History 63_files/Training_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Training_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton206></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton207',1)" 
            onmouseout="F_roll('NavigationButton207',0)" 
            href="http://www.controlloop.co.za/Consulting/consulting.htm"><IMG 
            id=NavigationButton207 height=19 alt=Consulting 
            src="Case History 63_files/Consulting_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Consulting_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton207></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton208',1)" 
            onmouseout="F_roll('NavigationButton208',0)" 
            href="http://www.controlloop.co.za/Protuner/protuner.htm"><IMG 
            id=NavigationButton208 height=19 alt=Protuner 
            src="Case History 63_files/Protuner_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Protuner_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton208></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton209',1)" 
            onmouseout="F_roll('NavigationButton209',0)" 
            href="http://www.controlloop.co.za/Contact_us/contact_us.htm"><IMG 
            id=NavigationButton209 height=19 alt="Contact us" 
            src="Case History 63_files/Contact_us_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Contact_us_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton209></A></TD>
          <TD width=120 height=19><A 
            onmouseover="F_roll('NavigationButton210',1)" 
            onmouseout="F_roll('NavigationButton210',0)" 
            href="http://www.controlloop.co.za/Articles/articles.htm"><IMG 
            id=NavigationButton210 height=19 alt=Articles 
            src="Case History 63_files/Articles_HGUIButtonOn.gif" width=120 
            onload="F_loadRollover(this,'Articles_HRGUIButtonOnOver.GIF')" 
            border=0 name=NavigationButton210></A></TD></TR></TBODY></TABLE><!--WEBBOT bot="HTMLMarkup" startspan ALT="Site Meter" --><A 
      href="http://sm6.sitemeter.com/stats.asp?site=sm6controleng" 
      target=_top><IMG alt="Site Meter" src="Case History 63_files/meter.gif" 
      border=0></A> <!--WEBBOT bot="HTMLMarkup" Endspan --></TD>
    <TD colSpan=3></TD></TR></TBODY></TABLE></CENTER></BODY></HTML>
