<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0073)http://www.controlloop.co.za/Articles/Case_History_53/case_history_53.htm -->
<HTML><HEAD><TITLE>Case History 53</TITLE>
<META http-equiv=Content-Type content="text/html; charset=ISO-8859-1">
<META content="MSHTML 6.00.2600.0" name=GENERATOR>
<SCRIPT language=JavaScript src="Case History 53_files/menu.js"></SCRIPT>

<SCRIPT language=JavaScript>
<!--
var controlloop = new MenuBar("controlloop",0,2,0,0,1,1,0,"solid","#CCCCCC","#CCCCCC","#999999","Verdana,Tahoma,Arial,Helvetica",12,"normal","normal","#000000","#FFFFFF","");
var m1_controlloop = new Menu("Home",127,100,"../../default.htm");
controlloop.addMenu(m1_controlloop);
var m2_controlloop = new Menu("Training",127,100,"../../Training/training.htm");
controlloop.addMenu(m2_controlloop);
var m3_controlloop = new Menu("Consulting",127,100,"../../Consulting/consulting.htm");
controlloop.addMenu(m3_controlloop);
var m4_controlloop = new Menu("Protuner",127,100,"../../Protuner/protuner.htm");
controlloop.addMenu(m4_controlloop);
var m5_controlloop = new Menu("Contact us",127,100,"../../Contact_us/contact_us.htm");
controlloop.addMenu(m5_controlloop);
var m6_controlloop = new Menu("Articles",130,100,"../../Articles/articles.htm");
controlloop.addMenu(m6_controlloop);
//-->
</SCRIPT>

<SCRIPT>
<!--
function F_loadRollover(){} function F_roll(){}
//-->
</SCRIPT>

<SCRIPT language=JavaScript1.2 src="Case History 53_files/rollover.js"></SCRIPT>
</HEAD>
<BODY text=#000000 vLink=#990000 link=#cc0000 bgColor=#ffffff leftMargin=0 
topMargin=0 MARGINHEIGHT="0" MARGINWIDTH="0">
<SCRIPT language=JavaScript><!--
controlloop.start();
//--></SCRIPT>

<CENTER>
<TABLE cellSpacing=0 cellPadding=0 width=776 border=0>
  <TBODY>
  <TR vAlign=top align=left>
    <TD vAlign=top align=left width=765 colSpan=5 height=77><IMG id=Picture83 
      height=77 src="Case History 53_files/banneroct2002.jpg" width=765 
    border=0></TD>
    <TD colSpan=2></TD></TR>
  <TR vAlign=top align=left>
    <TD width=20 height=7><IMG height=1 
      src="Case History 53_files/clearpixel.gif" width=20 border=0></TD>
    <TD width=23><IMG height=1 src="Case History 53_files/clearpixel.gif" 
      width=23 border=0></TD>
    <TD width=692><IMG height=1 src="Case History 53_files/clearpixel.gif" 
      width=692 border=0></TD>
    <TD width=17><IMG height=1 src="Case History 53_files/clearpixel.gif" 
      width=17 border=0></TD>
    <TD width=13><IMG height=1 src="Case History 53_files/clearpixel.gif" 
      width=13 border=0></TD>
    <TD width=1><IMG height=1 src="Case History 53_files/clearpixel.gif" 
      width=1 border=0></TD>
    <TD width=10><IMG height=1 src="Case History 53_files/clearpixel.gif" 
      width=10 border=0></TD></TR>
  <TR vAlign=top align=left>
    <TD width=766 colSpan=6 height=24><!--<IMG ID="DynamicMenu2501" HEIGHT=24 WIDTH=766 SRC="../../a_blank.gif" BORDER=0 ALT="DynamicMenu2 5.0">
                #DM2_controlloop# 1:coolPost:1--><NOLAYER>
      <DIV id=MBposcontrolloop 
      style="VISIBILITY: hidden; WIDTH: 766px; HEIGHT: 24px"></DIV></NOLAYER><ILAYER 
      id=MBposcontrolloopL VISIBILITY="hide" WIDTH="766" HEIGHT="24" 
      Z-INDEX="0"></ILAYER></TD>
    <TD></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=9></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=2></TD>
    <TD width=692>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#cc0000>Control Loop 
      Case History 53</FONT>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica>Another valve with weird 
      characteristics</FONT></B>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>A valve that suddenly 
      changed its dynamic characteristics after a loop was tuned was discussed 
      in the previous article.&nbsp; Another rather similar, but even more 
      interesting case arose when optimising a level-flow cascade loop in a 
      large South African petro-chemical refinery.
      <P>Figure 1 is the open loop test on the flow loop.&nbsp; 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture40 height=368 alt="Figure 1" 
            src="Case History 53_files/cashis53-1.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 1</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>It should be noted 
      that as the valve appeared extremely linear with a nice fast response, and 
      was hysteresis free, the test was only conducted over a flow range from 33 
      to 53%, and the flow loop was then tuned from this test.&nbsp; A final 
      closed loop test with the new tuning was then performed more or less over 
      the same flow region, and the control was robust and reasonably 
      fast.&nbsp; (Purely out of interest the new tuning was about 3 times 
      faster than the original "as found" tune, which is pretty normal as we 
      generally find most loops detuned).
      <P>The flow controller was then placed in automatic, and set on 
      cascade-remote setpoint so that the level loop could be tuned.&nbsp; An 
      open loop test was then performed on the level loop which is illustrated 
      in Figure 2. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture41 height=368 alt="Figure 2" 
            src="Case History 53_files/cashis53-2.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 2</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>As can be seen in the 
      figure, when the output of the level controller was raised to about 68% 
      the flow came up nicely to setpoint and then to everyone's amazement went 
      into an ultimate cycle.
      <P>When something like this occurs, it becomes mandatory to retest the 
      errant loop to determine the reason for the instability, so another open 
      loop test was then performed on the flow loop and can be seen in Figure 3. 

      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture42 height=368 alt="Figure 3" 
            src="Case History 53_files/cashis53-3.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 3</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The steps this time 
      were made over the complete operating range of the valve.&nbsp; The 
      response of the valve was nice and showed good linear installed 
      characteristics, until at about 68% of the controller output a sudden huge 
      increase in process gain can be seen, where the valve suddenly moved twice 
      as much as it had previously.&nbsp; It then moved as normal on the 
      following step.&nbsp; Apart from this one can see that there is a slight 
      overshoot on the return step from the top going down, which would indicate 
      possible insufficient power in the actuator to easily overcome static 
      frictional forces.&nbsp; This has been called "negative hysteresis" and it 
      often results in cycling in closed loop control, with the positioner 
      pushing the valve too far each time it reverses.&nbsp; The process gain 
      also increased near the bottom of the range, but as this is in area where 
      orifice flow measurement is completely inaccurate, and also as valves 
      generally become very non-linear near the seat this area is regarded as a 
      "no go" control area, and there is little one can do about it.
      <P>The correct thing to do in a situation like this is to try and find out 
      why the valve moved in such a non-linear fashion in the one area, and to 
      correct it.&nbsp; Alternatively one could insert a special linearization 
      table (or curve shaper) in the output path of the controller to correct 
      the non-linearity.&nbsp; However in this case the client felt that the 
      loop was not of sufficient importance to waste too much time on it, and 
      preferred to rather retune the flow controller to take care of the 
      instability.
      <P>To prevent instability in loops with non-linear characteristics, one 
      should always perform tuning in the region of highest process gain.&nbsp; 
      However it should be noted that the control response will then be slower 
      in regions of lower process gain. The flow loop was then retuned on the 
      largest step.&nbsp; The Protuner analysis and tuning report is shown in 
      Figure 4. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture43 height=368 alt="Figure 4" 
            src="Case History 53_files/cashis53-4.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 4</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>It was decided to use 
      the fastest tune to try and keep the response in regions of lower process 
      gain from being too slow.&nbsp; The Protuner fast tune allows a gain 
      margin of 8db, which is 25% more robust than quarter amplitude 
      damping.&nbsp; However even with this tuning, the flow control tended to 
      oscillate slightly in the upper region with higher process gain.&nbsp; 
      This can be seen in the final closed loop test shown in Figure 5.&nbsp; 
      The first step up shows the response to a setpoint change with the fast 
      tune.
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture44 height=368 alt="Figure 5" 
            src="Case History 53_files/cashis53-5.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 5</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The tuning was then 
      changed to the "slow" parameters, and the setpoint then stepped 
      down.&nbsp; It can be seen how the response slowed down as the process 
      variable moved into the region of lower process gain.&nbsp; A further step 
      downwards in setpoint then moved the process into the region of low flow 
      and valve operating very close to seat.&nbsp; As can be seen in Figure 
      5,&nbsp; the loop then also went into oscillation.&nbsp; Instability in 
      this region is not unusual and one can do nothing about it.&nbsp; It is 
      also not very important in this case as it is most unlikely that the valve 
      would operate down in this region under normal control conditions.
      <P>The last two steps of setpoint right up and down, show clearly how the 
      response is nice and fast in the region of higher process gain, and slower 
      in the region of lower gain.
      <P>One lesson that should be learned from this is never to take linearity 
      for granted, and that one should check the process dynamics over the 
      complete operating range.
      <P></FONT><A 
      href="index.html"><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>Index to articles</FONT></A>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#000000 
      size=-2>Michael Brown is a specialist in control loop optimisation, with 
      many years of experience in process control instrumentation. His main 
      activities are consulting, and teaching practical control loop analysis 
      and optimisation. He gives training courses which can be held in clients' 
      plants, where students can have the added benefit of practising on live 
      loops. His work takes him to plants all over South Africa, and also to 
      other countries. He can be contacted at: <BR>Tel (011) 486-0567<BR>Fax 
      (011) 646-2385<BR>E-Mail: </FONT><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2></FONT></B><A href="mailto:michael.brown@pixie.co.za"><B><FONT 
      face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>michael.brown@pixie.co.za</FONT></B></A></P></TD>
    <TD colSpan=4></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=19></TD></TR>
  <TR vAlign=top align=left>
    <TD height=19></TD>
    <TD width=732 colSpan=3>
      <TABLE id=NavigationBar1 cellSpacing=0 cellPadding=1 width=732 border=0>
        <TBODY>
        <TR vAlign=top align=left>
          <TD width=120><A onmouseover="F_roll('NavigationButton85',1)" 
            onmouseout="F_roll('NavigationButton85',0)" 
            href="http://www.controlloop.co.za/default.htm"><IMG 
            id=NavigationButton85 height=19 alt=Home 
            src="Case History 53_files/Home_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Home_NRGUIButtonOver.GIF')" border=0 
            name=NavigationButton85></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton86',1)" 
            onmouseout="F_roll('NavigationButton86',0)" 
            href="http://www.controlloop.co.za/Training/training.htm"><IMG 
            id=NavigationButton86 height=19 alt=Training 
            src="Case History 53_files/Training_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Training_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton86></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton87',1)" 
            onmouseout="F_roll('NavigationButton87',0)" 
            href="http://www.controlloop.co.za/Consulting/consulting.htm"><IMG 
            id=NavigationButton87 height=19 alt=Consulting 
            src="Case History 53_files/Consulting_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Consulting_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton87></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton88',1)" 
            onmouseout="F_roll('NavigationButton88',0)" 
            href="http://www.controlloop.co.za/Protuner/protuner.htm"><IMG 
            id=NavigationButton88 height=19 alt=Protuner 
            src="Case History 53_files/Protuner_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Protuner_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton88></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton89',1)" 
            onmouseout="F_roll('NavigationButton89',0)" 
            href="http://www.controlloop.co.za/Contact_us/contact_us.htm"><IMG 
            id=NavigationButton89 height=19 alt="Contact us" 
            src="Case History 53_files/Contact_us_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Contact_us_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton89></A></TD>
          <TD width=120 height=19><A 
            onmouseover="F_roll('NavigationButton90',1)" 
            onmouseout="F_roll('NavigationButton90',0)" 
            href="http://www.controlloop.co.za/Articles/articles.htm"><IMG 
            id=NavigationButton90 height=19 alt=Articles 
            src="Case History 53_files/Articles_HGUIButtonOn.gif" width=120 
            onload="F_loadRollover(this,'Articles_HRGUIButtonOnOver.GIF')" 
            border=0 name=NavigationButton90></A></TD></TR></TBODY></TABLE><!--WEBBOT bot="HTMLMarkup" startspan ALT="Site Meter" --><A 
      href="http://sm6.sitemeter.com/stats.asp?site=sm6controleng" 
      target=_top><IMG alt="Site Meter" src="Case History 53_files/meter.gif" 
      border=0></A> <!--WEBBOT bot="HTMLMarkup" Endspan --></TD>
    <TD colSpan=3></TD></TR></TBODY></TABLE></CENTER></BODY></HTML>
