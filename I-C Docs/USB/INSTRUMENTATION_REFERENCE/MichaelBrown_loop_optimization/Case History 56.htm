<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0073)http://www.controlloop.co.za/Articles/Case_History_56/case_history_56.htm -->
<HTML><HEAD><TITLE>Case History 56</TITLE>
<META http-equiv=Content-Type content="text/html; charset=ISO-8859-1">
<META content="MSHTML 6.00.2600.0" name=GENERATOR>
<SCRIPT language=JavaScript src="Case History 56_files/menu.js"></SCRIPT>

<SCRIPT language=JavaScript>
<!--
var controlloop = new MenuBar("controlloop",0,2,0,0,1,1,0,"solid","#CCCCCC","#CCCCCC","#999999","Verdana,Tahoma,Arial,Helvetica",12,"normal","normal","#000000","#FFFFFF","");
var m1_controlloop = new Menu("Home",127,100,"../../default.htm");
controlloop.addMenu(m1_controlloop);
var m2_controlloop = new Menu("Training",127,100,"../../Training/training.htm");
controlloop.addMenu(m2_controlloop);
var m3_controlloop = new Menu("Consulting",127,100,"../../Consulting/consulting.htm");
controlloop.addMenu(m3_controlloop);
var m4_controlloop = new Menu("Protuner",127,100,"../../Protuner/protuner.htm");
controlloop.addMenu(m4_controlloop);
var m5_controlloop = new Menu("Contact us",127,100,"../../Contact_us/contact_us.htm");
controlloop.addMenu(m5_controlloop);
var m6_controlloop = new Menu("Articles",130,100,"../../Articles/articles.htm");
controlloop.addMenu(m6_controlloop);
//-->
</SCRIPT>

<SCRIPT>
<!--
function F_loadRollover(){} function F_roll(){}
//-->
</SCRIPT>

<SCRIPT language=JavaScript1.2 src="Case History 56_files/rollover.js"></SCRIPT>
</HEAD>
<BODY text=#000000 vLink=#990000 link=#cc0000 bgColor=#ffffff leftMargin=0 
topMargin=0 MARGINHEIGHT="0" MARGINWIDTH="0">
<SCRIPT language=JavaScript><!--
controlloop.start();
//--></SCRIPT>

<CENTER>
<TABLE cellSpacing=0 cellPadding=0 width=776 border=0>
  <TBODY>
  <TR vAlign=top align=left>
    <TD vAlign=top align=left width=765 colSpan=5 height=77><IMG id=Picture83 
      height=77 src="Case History 56_files/banneroct2002.jpg" width=765 
    border=0></TD>
    <TD colSpan=2></TD></TR>
  <TR vAlign=top align=left>
    <TD width=20 height=7><IMG height=1 
      src="Case History 56_files/clearpixel.gif" width=20 border=0></TD>
    <TD width=23><IMG height=1 src="Case History 56_files/clearpixel.gif" 
      width=23 border=0></TD>
    <TD width=678><IMG height=1 src="Case History 56_files/clearpixel.gif" 
      width=678 border=0></TD>
    <TD width=31><IMG height=1 src="Case History 56_files/clearpixel.gif" 
      width=31 border=0></TD>
    <TD width=13><IMG height=1 src="Case History 56_files/clearpixel.gif" 
      width=13 border=0></TD>
    <TD width=1><IMG height=1 src="Case History 56_files/clearpixel.gif" 
      width=1 border=0></TD>
    <TD width=10><IMG height=1 src="Case History 56_files/clearpixel.gif" 
      width=10 border=0></TD></TR>
  <TR vAlign=top align=left>
    <TD width=766 colSpan=6 height=24><!--<IMG ID="DynamicMenu2501" HEIGHT=24 WIDTH=766 SRC="../../a_blank.gif" BORDER=0 ALT="DynamicMenu2 5.0">
                #DM2_controlloop# 1:coolPost:1--><NOLAYER>
      <DIV id=MBposcontrolloop 
      style="VISIBILITY: hidden; WIDTH: 766px; HEIGHT: 24px"></DIV></NOLAYER><ILAYER 
      id=MBposcontrolloopL VISIBILITY="hide" WIDTH="766" HEIGHT="24" 
      Z-INDEX="0"></ILAYER></TD>
    <TD></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=12></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=2></TD>
    <TD width=678>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#cc0000>Control Loop 
      Case History 56</FONT>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica>Solution to a reagent 
      addition control problem</FONT></B>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>A plant specialising 
      in processing slurry uses a very costly reagent, which has been costing 
      them several million Rands a month.&nbsp; The reagent is used to extract a 
      rare product from the slurry.&nbsp; The control of the reagent addition 
      had been a major problem for many years, as the result of the final 
      reaction, or "mix" as it will be called hereafter, can only be measured by 
      a very slow on-line titration method, whereby samples are taken 
      automatically and processed approximately once every 19 minutes.&nbsp; In 
      the past, feedback control had been ruled out as it had been felt that 
      satisfactory control could not be obtained with such a long 
      deadtime.&nbsp; 
      <P>The metallurgists in the plant had come up with a solution that is 
      illustrated in Figure 1.&nbsp; 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture40 height=412 alt="Figure 1" 
            src="Case History 56_files/cashis56-1.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 1</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The total slurry mass 
      input was measured coming into the plant.&nbsp; The quality and efficiency 
      of the reagent could be determined by laboratory samples, and it could 
      also be determined theoretically what quantity of reagent would be 
      required to give the correct reaction.&nbsp; This calculation could be 
      carried out in the PLC and the resultant which was sent to the reagent 
      addition control valve, would be the flow of reagent required.&nbsp; 
      Unfortunately this simplistic approach did not take any of the process 
      dynamics, unmeasured load upsets, or errors in the calculation into 
      account.&nbsp; To try and correct for this, the control system had a 
      manual bias which was added to the resultant of the calculation.&nbsp; The 
      idea was that the operators would read the true value of the "mix" from 
      the titrator, and would then slowly adjust the bias manually until the 
      correct figure was reached.&nbsp; Unfortunately again, this proved almost 
      impossible in reality, as it is extremely difficult for humans to try and 
      anticipate the dynamics of such a slow process, and also to try and 
      counteract the effects of any major load changes which take place.&nbsp; 
      The result of this was that the slurry had to be overdosed with the costly 
      reagent to ensure that no final product was lost.
      <P>The author was consulted to see if another solution could be 
      found.&nbsp; The first action taken was to perform an open loop test on 
      the process to establish its true dynamics.&nbsp; This was performed by 
      making a step change in the reagent flow to monitor the response on the 
      mix.&nbsp; It was essential for the plant to keep any load changes, such 
      as changes in the incoming total slurry flow into the plant, from 
      occurring during the test.&nbsp; Figure 2 shows the test.&nbsp; It is 
      interesting to note the steps in the process variable caused by the slow 
      sample time of the titrator.
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture41 height=368 alt="Figure 2" 
            src="Case History 56_files/cashis56-2.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 2</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>With the use of the 
      Protuner process analyser, a model of the process dynamics was established 
      from the Bode plots.&nbsp; This is shown in Figure 3.&nbsp; 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture42 height=410 alt="Figure 3" 
            src="Case History 56_files/cashis56-3.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 3</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The modelling 
      revealed a relatively simple first order lag deadtime process with a 
      deadtime of approximately 17 minutes, and a time constant of approximately 
      33 minutes.&nbsp; Such a process can be controlled with a normal feedback 
      control system.&nbsp; However as it is an extremely slow, any fast 
      upstream load disturbances would be "filtered" by the process dynamics, 
      and result in large control variance, as the feedback control could not 
      react fast enough to deal with them.
      <P>In a discussion with the metallurgists it was established that the only 
      load upsets that would occur upstream would be changes in the total 
      incoming slurry flow.&nbsp; The best way to deal with load upsets of this 
      nature is to use feedforward control.
      <P>Feedforward is a powerful technique which in the author's opinion is 
      not used nearly enough.&nbsp; Possibly control personnel do not realise 
      how relatively easy it is to implement.&nbsp; Feedforward control has 
      tremendous features including:
      <P>* Feedback can operate much faster than feedback.
      <P>* It cannot cause the system to go unstable.
      <P>* It can typically reduce load upsets by an order of magnitude.
      <P>* Feedforward corrects for disturbances before they upset the measured 
      variable.
      <P>* Feedforward tuning is generally less critical than feedback tuning.
      <P>* On processes with slow response to load upsets such as this one, even 
      poorly tuned feedforward is usually better than none.
      <P>On the other hand feedforward on its own suffers from two major 
      disadvantages.&nbsp; Firstly it cannot correct for unmeasured load 
      disturbances, and secondly it does not take control error (difference 
      between setpoint and measured variable) into account.&nbsp; For these 
      reasons feedforward can only be used in conjunction with feedback control.
      <P>It should be realised that the existing control scheme designed by the 
      metallurgists was in effect the equivalent of a simple feedforward system, 
      but without any dynamic compensation.&nbsp; The feedback portion was the 
      manual bias that was adjusted by the Operators.
      <P>The aim of proper feedforward control is that as a load change occurs 
      and starts reacting on the process, the feedforward induces an equal but 
      opposite effect simultaneously on the process.&nbsp; This has a net effect 
      of cancelling the effect of the load change, so that it has no effect on 
      the measured variable.&nbsp; To tune the feedforward controller, or 
      compensator as it is sometimes called, one makes a mathematical model of 
      the process, and another of the load function.&nbsp; The feedforward 
      compensator's tuning is based on the dynamics of the two transfer 
      functions.&nbsp; Theoretically if one could make perfect models, and build 
      a perfect compensator, then the load change would be completely cancelled 
      out and zero variance would result.&nbsp; In practice this is virtually 
      impossible, but even so, and even with the use of relatively simplistic 
      models, feedforward generally makes a dramatic improvement on the control 
      system.
      <P>The proposed control scheme is shown in Figure 4. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture43 height=412 alt="Figure 4" 
            src="Case History 56_files/cashis56-4.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 4</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The metallurgists' 
      original feedforward has now been modified by incorporating a feedforward 
      compensator to take into account the dynamics of the effects of the load 
      changes on the process.&nbsp; A typical compensator consists of a lead/lag 
      unit with a gain and a delay.&nbsp; The feedback portion of the scheme 
      employs a conventional feedback 3 term controller.&nbsp; The feedforward 
      and feedback are combined in an adder unit, the output of which is used as 
      the setpoint to the cascaded reagent flow controller.
      <P>The reason for the cascade flow control is that as the dynamics of the 
      reagent addition on the mix is so terribly slow, any problems encountered 
      with the reagent control valve (typically like hysteresis, stick-slip, or 
      non-linearity), or changes in pressure of the reagent flow would have 
      disastrous consequences on the control performance of the reagent 
      addition.&nbsp; It is absolutely essential for good control on very slow 
      processes, that cascade control be used to ensure that the flow through 
      the valve is what it should be.&nbsp; It can be regarded as effectively 
      "making the valve intelligent".
      <P>To implement the scheme, the loops must be tuned in the following 
order:
      <P>1. Secondary flow cascade.
      <P>2. Reagent addition feedback (cascade master).
      <P>3. Feedforward.
      <P>Before tuning feedback controllers, one needs to be aware of any 
      problems in the loop that can affect closed loop performance.&nbsp; Then 
      it is essential that a suitable response to a change is in fact truly 
      representative of the process before being able to calculate tuning 
      parameters utilising scientific techniques.&nbsp; The method of tuning 
      employed by the author makes use of a step change in the process, and then 
      translating this response into the frequency domain by using a computer 
      programme which essentially performs a full digital Laplace transform.
      <P>Tuning a simple flow loop should be easy as step changes can be easily 
      and quickly made.&nbsp; However when tuning the flow loop, it was found 
      that the reagent addition valve suffered from an incredible 20% 
      hysteresis.&nbsp; A valve with positioner should display less than 1% 
      hysteresis at the most.&nbsp; Figure 5 shows this test. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture44 height=410 alt="Figure 5" 
            src="Case History 56_files/cashis56-5.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 5</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The mind boggles at 
      the control the plant must have been having originally with this valve, 
      and with no cascade flow control at all.&nbsp; It is little wonder that 
      they had to overdose so heavily, as fine control by the operators would 
      have been absolutely impossible.&nbsp; With cascade control, the fast 
      parameters that can be set in a flow controller would at least ensure that 
      the average flow of reagent could be kept to the required value.&nbsp; It 
      was of course recommended that the plant replace the flow valves at the 
      earliest opportunity.
      <P>To tune the reagent addition master loop, and feedforward compensator, 
      one again needs to make step changes in order to be able to make up the 
      requisite mathematical models.&nbsp; However when deadtimes and time 
      constants of over 30 minutes are involved it becomes very time consuming, 
      and it is also much harder to try and avoid external effects from 
      influencing the tests over long periods.&nbsp; It is also difficult for 
      the process operators to keep conditions steady during these tests.&nbsp; 
      In this particular case there was a great deal of reluctance on the part 
      of the process people to carry out this work.&nbsp; A couple of tests were 
      performed by them over the next few months, but were not very satisfactory 
      as they were cut short before final steady state conditions were reached.
      <P>In spite of this, the plant wished to try out the new control system 
      with tunings based on these tests.&nbsp; The results were so good compared 
      with previous plant performance, that no further attempts have been made 
      since then to do further testing.&nbsp; Whilst this has shown how 
      effective a feedback/feedforward control system can be, the author would 
      have loved to have been able to have better tests to have really got the 
      systems working even better.&nbsp; However it does prove how effectively a 
      combination of feedback and&nbsp; feedforward control systems can operate.
      <P></FONT><A 
      href="index.html"><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>Index to articles</FONT></A>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#000000 
      size=-2>Michael Brown is a specialist in control loop optimisation, with 
      many years of experience in process control instrumentation. His main 
      activities are consulting, and teaching practical control loop analysis 
      and optimisation. He gives training courses which can be held in clients' 
      plants, where students can have the added benefit of practising on live 
      loops. His work takes him to plants all over South Africa, and also to 
      other countries. He can be contacted at: <BR>Tel (011) 486-0567<BR>Fax 
      (011) 646-2385<BR>E-Mail: </FONT><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2></FONT></B><A href="mailto:michael.brown@pixie.co.za"><B><FONT 
      face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>michael.brown@pixie.co.za</FONT></B></A></P></TD>
    <TD colSpan=4></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=19></TD></TR>
  <TR vAlign=top align=left>
    <TD height=19></TD>
    <TD width=732 colSpan=3>
      <TABLE id=NavigationBar1 cellSpacing=0 cellPadding=1 width=732 border=0>
        <TBODY>
        <TR vAlign=top align=left>
          <TD width=120><A onmouseover="F_roll('NavigationButton13',1)" 
            onmouseout="F_roll('NavigationButton13',0)" 
            href="http://www.controlloop.co.za/default.htm"><IMG 
            id=NavigationButton13 height=19 alt=Home 
            src="Case History 56_files/Home_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Home_NRGUIButtonOver.GIF')" border=0 
            name=NavigationButton13></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton14',1)" 
            onmouseout="F_roll('NavigationButton14',0)" 
            href="http://www.controlloop.co.za/Training/training.htm"><IMG 
            id=NavigationButton14 height=19 alt=Training 
            src="Case History 56_files/Training_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Training_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton14></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton15',1)" 
            onmouseout="F_roll('NavigationButton15',0)" 
            href="http://www.controlloop.co.za/Consulting/consulting.htm"><IMG 
            id=NavigationButton15 height=19 alt=Consulting 
            src="Case History 56_files/Consulting_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Consulting_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton15></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton16',1)" 
            onmouseout="F_roll('NavigationButton16',0)" 
            href="http://www.controlloop.co.za/Protuner/protuner.htm"><IMG 
            id=NavigationButton16 height=19 alt=Protuner 
            src="Case History 56_files/Protuner_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Protuner_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton16></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton17',1)" 
            onmouseout="F_roll('NavigationButton17',0)" 
            href="http://www.controlloop.co.za/Contact_us/contact_us.htm"><IMG 
            id=NavigationButton17 height=19 alt="Contact us" 
            src="Case History 56_files/Contact_us_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Contact_us_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton17></A></TD>
          <TD width=120 height=19><A 
            onmouseover="F_roll('NavigationButton18',1)" 
            onmouseout="F_roll('NavigationButton18',0)" 
            href="http://www.controlloop.co.za/Articles/articles.htm"><IMG 
            id=NavigationButton18 height=19 alt=Articles 
            src="Case History 56_files/Articles_HGUIButtonOn.gif" width=120 
            onload="F_loadRollover(this,'Articles_HRGUIButtonOnOver.GIF')" 
            border=0 name=NavigationButton18></A></TD></TR></TBODY></TABLE><!--WEBBOT bot="HTMLMarkup" startspan ALT="Site Meter" --><A 
      href="http://sm6.sitemeter.com/stats.asp?site=sm6controleng" 
      target=_top><IMG alt="Site Meter" src="Case History 56_files/meter.gif" 
      border=0></A> <!--WEBBOT bot="HTMLMarkup" Endspan --></TD>
    <TD colSpan=3></TD></TR></TBODY></TABLE></CENTER></BODY></HTML>
