<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0073)http://www.controlloop.co.za/Articles/Case_History_65/case_history_65.htm -->
<HTML><HEAD><TITLE>Case History 65</TITLE>
<META http-equiv=Content-Type content="text/html; charset=ISO-8859-1">
<META content="MSHTML 6.00.2600.0" name=GENERATOR>
<SCRIPT language=JavaScript src="Case History 65_files/menu.js"></SCRIPT>

<SCRIPT language=JavaScript>
<!--
var controlloop = new MenuBar("controlloop",0,2,0,0,1,1,0,"solid","#CCCCCC","#CCCCCC","#999999","Verdana,Tahoma,Arial,Helvetica",12,"normal","normal","#000000","#FFFFFF","");
var m1_controlloop = new Menu("Home",127,100,"../../default.htm");
controlloop.addMenu(m1_controlloop);
var m2_controlloop = new Menu("Training",127,100,"../../Training/training.htm");
controlloop.addMenu(m2_controlloop);
var m3_controlloop = new Menu("Consulting",127,100,"../../Consulting/consulting.htm");
controlloop.addMenu(m3_controlloop);
var m4_controlloop = new Menu("Protuner",127,100,"../../Protuner/protuner.htm");
controlloop.addMenu(m4_controlloop);
var m5_controlloop = new Menu("Contact us",127,100,"../../Contact_us/contact_us.htm");
controlloop.addMenu(m5_controlloop);
var m6_controlloop = new Menu("Articles",130,100,"../../Articles/articles.htm");
controlloop.addMenu(m6_controlloop);
//-->
</SCRIPT>

<SCRIPT>
<!--
function F_loadRollover(){} function F_roll(){}
//-->
</SCRIPT>

<SCRIPT language=JavaScript1.2 src="Case History 65_files/rollover.js"></SCRIPT>
</HEAD>
<BODY text=#000000 vLink=#990000 link=#cc0000 bgColor=#ffffff leftMargin=0 
topMargin=0 MARGINHEIGHT="0" MARGINWIDTH="0">
<SCRIPT language=JavaScript><!--
controlloop.start();
//--></SCRIPT>

<CENTER>
<TABLE cellSpacing=0 cellPadding=0 width=816 border=0>
  <TBODY>
  <TR vAlign=top align=left>
    <TD vAlign=top align=left width=765 colSpan=5 height=77><IMG id=Picture83 
      height=77 src="Case History 65_files/banneroct2002.jpg" width=765 
    border=0></TD>
    <TD colSpan=2></TD></TR>
  <TR vAlign=top align=left>
    <TD width=20 height=7><IMG height=1 
      src="Case History 65_files/clearpixel.gif" width=20 border=0></TD>
    <TD width=31><IMG height=1 src="Case History 65_files/clearpixel.gif" 
      width=31 border=0></TD>
    <TD width=701><IMG height=1 src="Case History 65_files/clearpixel.gif" 
      width=701 border=0></TD>
    <TD width=9><IMG height=1 src="Case History 65_files/clearpixel.gif" 
      width=9 border=0></TD>
    <TD width=4><IMG height=1 src="Case History 65_files/clearpixel.gif" 
      width=4 border=0></TD>
    <TD width=1><IMG height=1 src="Case History 65_files/clearpixel.gif" 
      width=1 border=0></TD>
    <TD width=50><IMG height=1 src="Case History 65_files/clearpixel.gif" 
      width=50 border=0></TD></TR>
  <TR vAlign=top align=left>
    <TD width=766 colSpan=6 height=24><!--<IMG ID="DynamicMenu2501" HEIGHT=24 WIDTH=766 SRC="../../a_blank.gif" BORDER=0 ALT="DynamicMenu2 5.0">
                #DM2_controlloop# 1:coolPost:1--><NOLAYER>
      <DIV id=MBposcontrolloop 
      style="VISIBILITY: hidden; WIDTH: 766px; HEIGHT: 24px"></DIV></NOLAYER><ILAYER 
      id=MBposcontrolloopL VISIBILITY="hide" WIDTH="766" HEIGHT="24" 
      Z-INDEX="0"></ILAYER></TD>
    <TD></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=8></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=2></TD>
    <TD width=710 colSpan=2>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#cc0000>CONTROL LOOP 
      CASE HISTORY 65<BR><BR></FONT><FONT 
      face=Verdana,Tahoma,Arial,Helvetica>The only magic: understanding what you 
      are doing</FONT></B> 
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>Optimisation of 
      regulatory control systems is not easy.&nbsp; It is also time consuming 
      hard work.&nbsp; There are generally no short cuts.&nbsp; Many people 
      often don't realise this, and are always seeking for a magic tool to take 
      care of problems and do optimisation for them.
      <P>Unfortunately in the real world of industrial control where we have to 
      use real valves, and have to deal with the often harsh and complex 
      processes found in our plants, there are no, and never will be, magic 
      devices capable of performing optimisation automatically for us.&nbsp; 
      Yes, there are certainly great aids in the form of computerised devices 
      like digital controllers, smart transmitters, smart valve positioners, 
      loop analysers, and tuning packages, which can make our task unbelievably 
      much easier, but these are all merely tools which must be used correctly.
      <P>In general about 85% of loops in nearly all the plants I have been in 
      are operating inefficiently in automatic, and very few people including 
      the control people are actually aware of this.&nbsp; The reason for this 
      is that until recently there has never been any teaching of truly 
      practical regulatory control, and the vast majority of people in the field 
      have no real understanding of this subject.&nbsp; This is because control 
      as taught in educational institutions is highly theoretical.&nbsp; Most 
      people on entering into this field find they cannot generally use what 
      they were taught, and "learn to fly by the seats of their pants".&nbsp; 
      Also over the years people have accepted the way loops are operating as 
      normal, as they have no concept at all of how much better the controls 
      could operate if they were optimised properly.
      <P>The above comments are often treated with great disbelief and derision 
      by many practitioners in this field.&nbsp; I often meet people who have 
      been sent by their companies to attend my courses. Sometimes a delegate 
      will start with a reluctant and even aggressive attitude.&nbsp; However in 
      the vast majority of cases at the end of the training, this attitude is 
      completely changed, and they are highly enthusiastic, because during the 
      courses they have learnt a new and very practical approach to control 
      which for the first time in their careers has given them a very deep and 
      true understanding of all aspects of what is involved, and what can occur 
      in regulatory control systems.
      <P>This understanding is the only true magic.
      <P>In this month's article to illustrate the typical lack of understanding 
      and awareness of problems that exist in the average plant, I would like to 
      show a few examples taken from a mining plant where I recently spent some 
      time in helping them optimise their loops.
      <P>The control system in the plant was one of the latest, very popular 
      European make of PLC.&nbsp; As mentioned in my Loop Signature series which 
      are generally published in alternate months, I normally find that there 
      are more problems where PLC's are used for control as opposed to 
      DCS's.&nbsp; The main reasons for this is that PLC's are often very 
      limited in their analogue control capabilities, and also because their 
      programming is too versatile, and not structured enough to prevent people 
      from doing silly things. 
      <P>This mining plant is a good example.&nbsp; The first thing found was 
      that the PLC programmer for some reason had not used the perfectly good 
      standard PID block that was supplied as standard by the manufacturer of 
      the PLC, but had written his own.&nbsp; On testing the performance of this 
      block, it was found that it was completely faulty.&nbsp; Firstly there was 
      no proportional action at all, only integral.&nbsp; Secondly the integral 
      was not adjustable.
      <P>This finding was quite staggering as it meant that not a single control 
      loop on the whole plant could be working properly.&nbsp; The plant is 
      quite a few years old, but to date nobody was aware of this problem, 
      although there was a general "feeling" that the controls were not too 
good.
      <P>A decision was then made to replace all the PID blocks with the 
      standard block.&nbsp; The system integrators were called in to perform 
      this task.&nbsp; A senior programmer did this work.&nbsp; He had extensive 
      experience on the make of PLC, and had used the PID block many times in 
      the past on other applications.&nbsp; However on testing the new blocks it 
      was found that the integral was not working correctly.&nbsp; The reason 
      for this, is that like many other PLC programmers, he had not triggered 
      the PID block on a regular and accurate timed interrupt.&nbsp; Programmers 
      assume that because there is a place for entering the scan rate in the 
      control block, the PID is executed at this rate.&nbsp; Most PLC's don't 
      work that way.&nbsp; The scan rate entry in the control block is to merely 
      tell the block at what rate you, the programmer,&nbsp; have set the 
      activation of the block.
      <P>It is vital for PID control to get this right, as both the integral and 
      the derivative terms are entirely time dependent.
      <P>The next thing found was that there was no written description of the 
      system operation.&nbsp; Many programmers had worked on the programme over 
      the years, and virtually none of them had left any comments on what they 
      had done.&nbsp; Thus it became a nightmare to try and sort out what was 
      actually happening, and to try and ascertain what the controls should 
      actually do.&nbsp; At the time of writing this the mine is trying to reach 
      a&nbsp; decision whether they should rewrite the whole PLC 
      programme.&nbsp; This is an extremely hard thing to do in&nbsp; a working 
      plant.&nbsp; In the meantime we were asked to optimise as many loops as 
      possible.
      <P>Once the PID function was sorted out, the process manager asked us to 
      look at the level control of some tanks.&nbsp; These were a source of 
      major concern as they were always flooding or running empty.&nbsp; People 
      had been trying to sort out the control for a long time without success.
      <P>The first thing one should do when performing optimisation, is to get a 
      full understanding of the actual process, and then to ascertain what the 
      control is supposed to do, and also to find out what problems exist.&nbsp; 
      The sketch shown in Figure 1 was given to us.&nbsp; Essentially there were 
      two tanks one above the other.&nbsp; The top fed into the bottom, and it 
      was desired to control the level in each.
      <P align=center><I>Figure 1</I>
      <P></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=300 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture70 height=394 alt="Figure 1" 
            src="Case History 65_files/cashis65-1.jpg" width=300 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>On inspecting the 
      tanks in the actual plant, it was found that the drawing was incorrect in 
      quite a few respects.&nbsp; Several feeds from other sources came into the 
      tanks.&nbsp; There were other outlets with control valves and basically 
      nobody in the plant was really sure how the whole system was supposed to 
      work.&nbsp; Just trying to tune loops blindly is usually a waste of time 
      until one really understands the system operation and what is required of 
      the controls.
      <P>Preliminary test were performed to try and get some semblance of 
      control operating for the meantime.&nbsp; To tune a level loop, the first 
      thing one must do is to get the level to stay constant by balancing the 
      outflow and the inflow.&nbsp; It was found that this was impossible to 
      do.&nbsp; At the time of the test there was virtually no outflow from the 
      tanks, and it was found that the level was rising even though the inlet 
      valves were shutoff.&nbsp; Further investigation showed that the valves 
      were passing at least 30% of the maximum flow when they were in the fully 
      closed position!&nbsp; There is no way that the levels can be controlled 
      with valves like that.&nbsp; People in the plant had been trying to tune 
      these loops for months without having found out that there was a valve 
      problem.
      <P>Another interesting example of lack of understanding is the control 
      system shown in Figure 2.
      <P align=center><I>Figure 2</I>
      <P></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=700 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture71 height=448 alt="Figure 2" 
            src="Case History 65_files/cashis65-2.jpg" width=700 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>Slurry was being fed 
      to the inlet of a cyclone from a tank.&nbsp; Ideally a cyclone operates 
      best if its inlet feed is kept at a certain constant pressure.&nbsp; The 
      problem in this case was that the product feed into the cyclone feed tank 
      was variable and could not be controlled.&nbsp; Therefore if one is 
      controlling the tank's output flow to keep the cyclone inlet's pressure 
      constant, it is almost certain that the level in the tank will either rise 
      or fall depending on the rate of product feed into the tank, and the tank 
      could either overflow or run empty.&nbsp; 
      <P>To try and solve this problem, the mine had installed two controllers 
      on the system, one being a level, and the other a pressure controller. The 
      latter was normally in control.&nbsp; However when the tank level got too 
      close to the top or to the bottom, the level controller took over the 
      control.&nbsp; Pressure and level controllers have perforce extremely 
      different tunings. Therefore when the other controller took over it caused 
      a huge bump in the system.&nbsp; Even if one was to try and introduce some 
      way of doing it more smoothly the cyclone inlet pressure would vary a lot 
      which is most undesirable.&nbsp; Typically say the tank level was rising 
      and reached the point where the level controller took over.&nbsp; The 
      valve then opened right up causing the cyclone inlet pressure to rise 
      dramatically.&nbsp; After a while the level would start dropping and soon 
      reached the point where the pressure controller took over again.&nbsp; 
      Once again the valve would shut, and the level in the tank started rising 
      and would soon switch over to level control again.&nbsp; The whole thing 
      was very cyclic.
      <P>One of the basic laws of control states that you can not control more 
      variables than the number of valves available.&nbsp; There is only one 
      valve here.&nbsp; You have to choose if you wish to have level or pressure 
      control. Its impossible to have both.&nbsp; In this case one has to face 
      up to the fact that the level control is the more important, as the tank 
      must not be allowed to run empty or to overflow.&nbsp; The only solution 
      is to use a form of level control that minimises changes in valve 
      position, and to try and keep the cyclone inlet pressure as constant as 
      possible with the slowest possible changes to it.
      <P>To achieve this one must arrange that the control system will operate 
      so that the valve will be fully open when the level in the tank is near 
      the top, and fully closed when it is near the bottom.&nbsp; Between those 
      two points, one would like to arrange that the valve moves as little as 
      possible.&nbsp; The easiest way is to draw a straight line between the two 
      points, and programme a lookup table connected between the output from the 
      level transmitter and the input to the valve, so that the valve moves in a 
      linear fashion between the 2 extremities in proportion to the level in the 
      tank.&nbsp; However there is nothing to stop one from shaping the line in 
      such a way that the valve movement is minimal when the tank is mid-level 
      and slowly increasing this as the level starts moving towards the 
      extremities.&nbsp; A typical method is to use an "error squared" shape 
      which is based on the square of the difference between the level at 50% 
      and the actual measurement at a particular time. Other curve shapes can be 
      designed as one pleases.&nbsp; A typical curve is shown in Figure 3.&nbsp; 
      It can be seen that there will be very little valve movement whilst the 
      level is in the middle tank region.
      <P align=center><I>Figure 3
      <P align=left></I></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=400 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture72 height=404 alt="Figure 3" 
            src="Case History 65_files/cashis65-3.jpg" width=400 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>If one was to employ 
      this technique on the cyclone it would minimise cyclone pressure inlet 
      pressure variations.&nbsp; It may not keep&nbsp; the pressure at exactly 
      the desired value, but it is the best solution to the problem.
      <P>These examples show how "hit and miss" the control was in the plant. It 
      had been that way for many years.&nbsp; Instrument technicians had come 
      and gone.&nbsp; Most had tried to tune the loops blindly, making no 
      attempt to gain understanding of the processes and controls.&nbsp; As a 
      result no one had succeeded, or even more importantly, picked up the 
      problems as detailed above.
      <P>Once one gains the "magic" of understanding what you are trying to do, 
      everything becomes a lot easier.
      <P></FONT><A 
      href="index.html"><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>Index to articles</FONT></A>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#000000 
      size=-2>Michael Brown is a specialist in control loop optimisation, with 
      many years of experience in process control instrumentation. His main 
      activities are consulting, and teaching practical control loop analysis 
      and optimisation. He gives training courses which can be held in clients' 
      plants, where students can have the added benefit of practising on live 
      loops. His work takes him to plants all over South Africa, and also to 
      other countries. He can be contacted at: <BR>Tel (011) 486-0567<BR>Fax 
      (011) 646-2385<BR>E-Mail: </FONT><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2></FONT></B><A href="mailto:michael.brown@pixie.co.za"><B><FONT 
      face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>michael.brown@pixie.co.za</FONT></B></A><BR>&nbsp;</P></TD>
    <TD colSpan=3></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=19></TD></TR>
  <TR vAlign=top align=left>
    <TD height=19></TD>
    <TD width=732 colSpan=2>
      <TABLE id=NavigationBar1 cellSpacing=0 cellPadding=1 width=732 border=0>
        <TBODY>
        <TR vAlign=top align=left>
          <TD width=120><A onmouseover="F_roll('NavigationButton217',1)" 
            onmouseout="F_roll('NavigationButton217',0)" 
            href="http://www.controlloop.co.za/default.htm"><IMG 
            id=NavigationButton217 height=19 alt=Home 
            src="Case History 65_files/Home_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Home_NRGUIButtonOver.GIF')" border=0 
            name=NavigationButton217></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton218',1)" 
            onmouseout="F_roll('NavigationButton218',0)" 
            href="http://www.controlloop.co.za/Training/training.htm"><IMG 
            id=NavigationButton218 height=19 alt=Training 
            src="Case History 65_files/Training_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Training_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton218></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton219',1)" 
            onmouseout="F_roll('NavigationButton219',0)" 
            href="http://www.controlloop.co.za/Consulting/consulting.htm"><IMG 
            id=NavigationButton219 height=19 alt=Consulting 
            src="Case History 65_files/Consulting_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Consulting_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton219></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton220',1)" 
            onmouseout="F_roll('NavigationButton220',0)" 
            href="http://www.controlloop.co.za/Protuner/protuner.htm"><IMG 
            id=NavigationButton220 height=19 alt=Protuner 
            src="Case History 65_files/Protuner_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Protuner_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton220></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton221',1)" 
            onmouseout="F_roll('NavigationButton221',0)" 
            href="http://www.controlloop.co.za/Contact_us/contact_us.htm"><IMG 
            id=NavigationButton221 height=19 alt="Contact us" 
            src="Case History 65_files/Contact_us_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Contact_us_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton221></A></TD>
          <TD width=120 height=19><A 
            onmouseover="F_roll('NavigationButton222',1)" 
            onmouseout="F_roll('NavigationButton222',0)" 
            href="http://www.controlloop.co.za/Articles/articles.htm"><IMG 
            id=NavigationButton222 height=19 alt=Articles 
            src="Case History 65_files/Articles_HGUIButtonOn.gif" width=120 
            onload="F_loadRollover(this,'Articles_HRGUIButtonOnOver.GIF')" 
            border=0 name=NavigationButton222></A></TD></TR></TBODY></TABLE><!--WEBBOT bot="HTMLMarkup" startspan ALT="Site Meter" --><A 
      href="http://sm6.sitemeter.com/stats.asp?site=sm6controleng" 
      target=_top><IMG alt="Site Meter" src="Case History 65_files/meter.gif" 
      border=0></A> <!--WEBBOT bot="HTMLMarkup" Endspan --></TD>
    <TD colSpan=4></TD></TR></TBODY></TABLE></CENTER></BODY></HTML>
