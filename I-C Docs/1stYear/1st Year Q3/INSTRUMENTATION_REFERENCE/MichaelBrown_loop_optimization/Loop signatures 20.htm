<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0079)http://www.controlloop.co.za/Articles/Loop_signatures_20/loop_signatures_20.htm -->
<HTML><HEAD><TITLE>Loop signatures 20</TITLE>
<META http-equiv=Content-Type content="text/html; charset=ISO-8859-1">
<META content="MSHTML 6.00.2600.0" name=GENERATOR>
<SCRIPT language=JavaScript src="Loop signatures 20_files/menu.js"></SCRIPT>

<SCRIPT language=JavaScript>
<!--
var controlloop = new MenuBar("controlloop",0,2,0,0,1,1,0,"solid","#CCCCCC","#CCCCCC","#999999","Verdana,Tahoma,Arial,Helvetica",12,"normal","normal","#000000","#FFFFFF","");
var m1_controlloop = new Menu("Home",127,100,"../../default.htm");
controlloop.addMenu(m1_controlloop);
var m2_controlloop = new Menu("Training",127,100,"../../Training/training.htm");
controlloop.addMenu(m2_controlloop);
var m3_controlloop = new Menu("Consulting",127,100,"../../Consulting/consulting.htm");
controlloop.addMenu(m3_controlloop);
var m4_controlloop = new Menu("Protuner",127,100,"../../Protuner/protuner.htm");
controlloop.addMenu(m4_controlloop);
var m5_controlloop = new Menu("Contact us",127,100,"../../Contact_us/contact_us.htm");
controlloop.addMenu(m5_controlloop);
var m6_controlloop = new Menu("Articles",130,100,"../../Articles/articles.htm");
controlloop.addMenu(m6_controlloop);
//-->
</SCRIPT>

<SCRIPT>
<!--
function F_loadRollover(){} function F_roll(){}
//-->
</SCRIPT>

<SCRIPT language=JavaScript1.2 
src="Loop signatures 20_files/rollover.js"></SCRIPT>
</HEAD>
<BODY text=#000000 vLink=#cc0033 link=#cc0033 bgColor=#ffffff leftMargin=0 
topMargin=0 MARGINHEIGHT="0" MARGINWIDTH="0">
<SCRIPT language=JavaScript><!--
controlloop.start();
//--></SCRIPT>

<CENTER>
<TABLE cellSpacing=0 cellPadding=0 width=776 border=0>
  <TBODY>
  <TR vAlign=top align=left>
    <TD vAlign=top align=left width=765 colSpan=5 height=77><IMG id=Picture83 
      height=77 src="Loop signatures 20_files/banneroct2002.jpg" width=765 
      border=0></TD>
    <TD colSpan=2></TD></TR>
  <TR vAlign=top align=left>
    <TD width=20 height=7><IMG height=1 
      src="Loop signatures 20_files/clearpixel.gif" width=20 border=0></TD>
    <TD width=23><IMG height=1 src="Loop signatures 20_files/clearpixel.gif" 
      width=23 border=0></TD>
    <TD width=684><IMG height=1 src="Loop signatures 20_files/clearpixel.gif" 
      width=684 border=0></TD>
    <TD width=25><IMG height=1 src="Loop signatures 20_files/clearpixel.gif" 
      width=25 border=0></TD>
    <TD width=13><IMG height=1 src="Loop signatures 20_files/clearpixel.gif" 
      width=13 border=0></TD>
    <TD width=1><IMG height=1 src="Loop signatures 20_files/clearpixel.gif" 
      width=1 border=0></TD>
    <TD width=10><IMG height=1 src="Loop signatures 20_files/clearpixel.gif" 
      width=10 border=0></TD></TR>
  <TR vAlign=top align=left>
    <TD width=766 colSpan=6 height=24><!--<IMG ID="DynamicMenu2501" HEIGHT=24 WIDTH=766 SRC="../../a_blank.gif" BORDER=0 ALT="DynamicMenu2 5.0">
                #DM2_controlloop# 1:coolPost:1--><NOLAYER>
      <DIV id=MBposcontrolloop 
      style="VISIBILITY: hidden; WIDTH: 766px; HEIGHT: 24px"></DIV></NOLAYER><ILAYER 
      id=MBposcontrolloopL VISIBILITY="hide" WIDTH="766" HEIGHT="24" 
      Z-INDEX="0"></ILAYER></TD>
    <TD></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=1></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=2></TD>
    <TD width=684>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica>Loop Problem Signatures No 
      20</FONT>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>Filters - the great 
      deceivers</FONT></B><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>
      <P>Noise on the PV signal was discussed in the previous loop signature 
      article, and it was mentioned that it is generally better to live with the 
      noise rather than filtering it out; provided it does not cause the final 
      control element to jump around excessively.&nbsp; This article explains 
      this reasoning.
      <P>Normal filters used in process control have a first order lag type 
      dynamic, which is generally preferable to time averaging filters.&nbsp; 
      This is because PID controllers can handle lag dynamics better.&nbsp; A 
      lag type filter is also referred to as a low pass filter, as it passes the 
      lower frequencies and attenuates higher frequencies components.&nbsp; 
      Visually the filtered signal appears to have less noise.&nbsp; Obviously 
      the greater the filter constant, the smoother the output signal.
      <P>In the old analogue days filters were extremely difficult to implement, 
      and as a result were seldom used.&nbsp; Today it is extremely easy to 
      implement a simple lag type filter on a digital control machine.&nbsp; 
      Only a few lines of code are needed.&nbsp; Most DCS, and a few PLC 
      manufacturers offer filters as a standard block.&nbsp; These filters 
      usually allow one to insert lags in a loop ranging from fractions of a 
      second to literally hours.
      <P>When a filter is used in the control equipment it is usually inserted 
      before the controller and the Operator's display, or SCADA.&nbsp; 
      <P>Figure 1 shows the response of a flow signal to a step change on the PD 
      (controller output).
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture94 height=411 alt="Figure 1" 
            src="Loop signatures 20_files/loopsig20fig1.jpg" width=550 
          border=0></TD></TR></TBODY></TABLE></DIV><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>
      <DIV align=center><B>Figure 1</B></DIV>
      <P>The signal has noise of some 2% amplitude on it.&nbsp; The signal is 
      then passed through a filter with a 5 second time constant, and the output 
      of the filter is shown in the same figure superimposed over the original 
      PV signal.&nbsp; It can be seen that the noise amplitude on the filtered 
      output has been reduced considerably.&nbsp; There are still some 
      fluctuations due to the lower frequency components present.&nbsp; Apart 
      from that, the signal has not been changed drastically.
      <P>In Figure 2 one can see how the situation has changed when a 50 second 
      filter is used.&nbsp; 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture90 height=410 alt="Figure 2" 
            src="Loop signatures 20_files/loopsig20fig2.jpg" width=550 
          border=0></TD></TR></TBODY></TABLE></DIV><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>
      <DIV align=center><B>Figure 2</B></DIV>
      <P>The noise has now been completely eliminated.&nbsp; The filter has 
      certainly achieved its purpose insomuch as it has got rid of the 
      noise.&nbsp; However the signal response has been really drastically 
      slowed down.&nbsp; The filter has now replaced the flow process as the 
      dominant dynamics in the control loop.&nbsp; In other words we are now 
      trying to control a filter rather than a flow!
      <P>Many learned texts on control have stated that if the time constant of 
      the filter exceeds the dominant time constant of a self regulating process 
      the control will be adversely affected.&nbsp; This is not necessarily 
      correct, as you will see in the next example.&nbsp; Tests we have 
      performed show that you can in fact get quite reasonable control on loops 
      with relatively heavy filters.&nbsp; However there are other really 
      serious effects which are more important, and which make the use of big 
      filters very undesirable.
      <P>One of these seriously bad effects is that filters can cause excessive 
      PV overshoots (as high as 300%), on step-changes in setpoint.&nbsp; Such 
      an overshoot is shown in the next example. 
      <P>In previous articles I have also referred to filters as the world's 
      biggest liars, as they can distort the response of the process as seen on 
      SCADA or DCS screens by the operator. The filter actually tends to reverse 
      the facts, making good things look bad, and bad things look good!
      <P>To illustrate this point, Figure 3 is the recording of a control system 
      on a noisy process. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture91 height=409 alt="Figure 3" 
            src="Loop signatures 20_files/loopsig20fig3.jpg" width=550 
          border=0></TD></TR></TBODY></TABLE></DIV><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>
      <DIV align=center><B>Figure 3</B></DIV>
      <P>The controller has a filter with a 50 second time constant in it. The 
      controller is extremely well tuned.&nbsp; The recording is made with the 
      Protuner analyser connected at the input to the controller (upstream of 
      the filter). A 10% step change in setpoint is followed by a 10% step 
      change in load. An enormous overshoot on the PV response to the setpoint 
      change can be seen. It is really bad. The load change however is 
      controlled well. The controller brings the process back to setpoint 
      speedily with little overshoot.&nbsp; This is in fact really good.&nbsp; 
      (It also shows you can indeed get quite good control even with a big 
      filter.)
      <P>Figure 4 shows what the Operator sees on his screens with a filtered 
      signal. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture92 height=409 alt="Figure 4" 
            src="Loop signatures 20_files/loopsig20fig4.jpg" width=550 
          border=0></TD></TR></TBODY></TABLE></DIV><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>
      <DIV align=center><B>Figure 4</B></DIV>
      <P>The setpoint change looks really good. There is no sign at all of an 
      overshoot. However the load change now looks terrible. It only shows as a 
      tiny offset, which seems to take forever to get back to setpoint. 
      Therefore the filter has completely distorted and reversed the true 
      facts.&nbsp; This is to me the most dangerous thing of all, as the 
      Operator doesn't really know what is going on in the plant. 
      <P>It must be remembered as well that the people doing the tuning are 
      generally also unaware of what filters can do, so they often ruthlessly 
      eliminate noise with enormous filters, and then do tuning whilst looking 
      at the filtered signal, so they have no real idea of the true response.
      <P>It is common practice these days for management to use the information 
      available on the SCADA for management evaluation and control purposes. 
      Therefore it is vital that people should avoid using big filters if they 
      want to have reliable information. This was illustrated on a mine in 
      Southern Africa where all the plant accounting and management information 
      was based on a transfer from their SCADA package into spreadsheets. Large 
      filters were applied on nearly every loop.&nbsp; It was a continuous 
      source of puzzle to the Metallurgists as to why the plant balances never 
      seemed to work out.
      <P><B>Rules for Filtering<BR></B>Sometimes one has to apply filters when 
      the noise is too much and starts moving the final control element around 
      too much.&nbsp; If you apply the following "rules of thumb" you will find 
      that you can't go too far wrong.
      <P>•If possible, eliminate the noise at its source.
      <P>•Use an anti-alias filter on the transmitter.&nbsp; (To be discussed in 
      future loop signature).
      <P>•Try tuning without a filter and check at the actual valve if it is 
      moving due to the noise.
      <P>•Avoid using a bigger filter than necessary.
      <P>•Biggest filter &lt; 10 x (Process deadtime + Scan rate of controller).
      <P>•Use I-PD controller with filters.&nbsp; (See loop signature no. 16).
      <P>•Train the Operators and process people about filter effects.
      <P>The last point is one of the most important.&nbsp; Unfortunately 
      process personnel are so used to heavily filtered signals in most plants, 
      that they get very unhappy when filters are removed.&nbsp; As mentioned in 
      the last loop signature, they mistake noise for instability.&nbsp; It is 
      sometimes very hard to convince them that the control is now much better.
      <P>It was mentioned earlier that if you do have to use a filter, then it 
      should be inserted in the control equipment rather than the 
      transmitter.&nbsp; This is because you cannot see the control response at 
      all if you filter in the field.&nbsp; The one exception to this rule is an 
      anti-alias filter, which will be discussed in a future loop signature.
      <P></FONT><A 
      href="http://www.controlloop.co.za/Articles/Index_to_articles/index_to_articles.htm#loopsig"><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>Index to Loop Problem 
      Signatures</FONT></A>
      <P align=left><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#000000 
      size=-2>Michael Brown is a specialist in control loop optimisation, with 
      many years of experience in process control instrumentation. His main 
      activities are consulting, and teaching practical control loop analysis 
      and optimisation. He gives training courses which can be held in clients' 
      plants, where students can have the added benefit of practising on live 
      loops. His work takes him to plants all over South Africa, and also to 
      other countries. He can be contacted at: <BR>Tel (011) 486-0567<BR>Fax 
      (011) 646-2385<BR>E-Mail: </FONT><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2></FONT></B><A href="mailto:michael.brown@pixie.co.za"><B><FONT 
      face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>michael.brown@pixie.co.za</FONT></B></A></P></TD>
    <TD colSpan=4></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=37></TD></TR>
  <TR vAlign=top align=left>
    <TD height=19></TD>
    <TD width=732 colSpan=3>
      <TABLE id=NavigationBar1 cellSpacing=0 cellPadding=1 width=732 border=0>
        <TBODY>
        <TR vAlign=top align=left>
          <TD width=120><A onmouseover="F_roll('NavigationButton19',1)" 
            onmouseout="F_roll('NavigationButton19',0)" 
            href="http://www.controlloop.co.za/default.htm"><IMG 
            id=NavigationButton19 height=19 alt=Home 
            src="Loop signatures 20_files/Home_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Home_NRGUIButtonOver.GIF')" border=0 
            name=NavigationButton19></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton20',1)" 
            onmouseout="F_roll('NavigationButton20',0)" 
            href="http://www.controlloop.co.za/Training/training.htm"><IMG 
            id=NavigationButton20 height=19 alt=Training 
            src="Loop signatures 20_files/Training_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Training_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton20></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton21',1)" 
            onmouseout="F_roll('NavigationButton21',0)" 
            href="http://www.controlloop.co.za/Consulting/consulting.htm"><IMG 
            id=NavigationButton21 height=19 alt=Consulting 
            src="Loop signatures 20_files/Consulting_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Consulting_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton21></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton22',1)" 
            onmouseout="F_roll('NavigationButton22',0)" 
            href="http://www.controlloop.co.za/Protuner/protuner.htm"><IMG 
            id=NavigationButton22 height=19 alt=Protuner 
            src="Loop signatures 20_files/Protuner_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Protuner_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton22></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton23',1)" 
            onmouseout="F_roll('NavigationButton23',0)" 
            href="http://www.controlloop.co.za/Contact_us/contact_us.htm"><IMG 
            id=NavigationButton23 height=19 alt="Contact us" 
            src="Loop signatures 20_files/Contact_us_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Contact_us_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton23></A></TD>
          <TD width=120 height=19><A 
            onmouseover="F_roll('NavigationButton24',1)" 
            onmouseout="F_roll('NavigationButton24',0)" 
            href="http://www.controlloop.co.za/Articles/articles.htm"><IMG 
            id=NavigationButton24 height=19 alt=Articles 
            src="Loop signatures 20_files/Articles_HGUIButtonOn.gif" width=120 
            onload="F_loadRollover(this,'Articles_HRGUIButtonOnOver.GIF')" 
            border=0 name=NavigationButton24></A></TD></TR></TBODY></TABLE><!--WEBBOT bot="HTMLMarkup" startspan ALT="Site Meter" --><A 
      href="http://sm6.sitemeter.com/stats.asp?site=sm6controleng" 
      target=_top><IMG alt="Site Meter" src="Loop signatures 20_files/meter.gif" 
      border=0></A> <!--WEBBOT bot="HTMLMarkup" Endspan --></TD>
    <TD colSpan=3></TD></TR></TBODY></TABLE></CENTER></BODY></HTML>
