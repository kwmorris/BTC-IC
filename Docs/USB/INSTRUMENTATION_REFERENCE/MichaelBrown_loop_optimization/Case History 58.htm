<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0073)http://www.controlloop.co.za/Articles/Case_History_58/case_history_58.htm -->
<HTML><HEAD><TITLE>Case History 58</TITLE>
<META http-equiv=Content-Type content="text/html; charset=ISO-8859-1">
<META content="MSHTML 6.00.2600.0" name=GENERATOR>
<SCRIPT language=JavaScript src="Case History 58_files/menu.js"></SCRIPT>

<SCRIPT language=JavaScript>
<!--
var controlloop = new MenuBar("controlloop",0,2,0,0,1,1,0,"solid","#CCCCCC","#CCCCCC","#999999","Verdana,Tahoma,Arial,Helvetica",12,"normal","normal","#000000","#FFFFFF","");
var m1_controlloop = new Menu("Home",127,100,"../../default.htm");
controlloop.addMenu(m1_controlloop);
var m2_controlloop = new Menu("Training",127,100,"../../Training/training.htm");
controlloop.addMenu(m2_controlloop);
var m3_controlloop = new Menu("Consulting",127,100,"../../Consulting/consulting.htm");
controlloop.addMenu(m3_controlloop);
var m4_controlloop = new Menu("Protuner",127,100,"../../Protuner/protuner.htm");
controlloop.addMenu(m4_controlloop);
var m5_controlloop = new Menu("Contact us",127,100,"../../Contact_us/contact_us.htm");
controlloop.addMenu(m5_controlloop);
var m6_controlloop = new Menu("Articles",130,100,"../../Articles/articles.htm");
controlloop.addMenu(m6_controlloop);
//-->
</SCRIPT>

<SCRIPT>
<!--
function F_loadRollover(){} function F_roll(){}
//-->
</SCRIPT>

<SCRIPT language=JavaScript1.2 src="Case History 58_files/rollover.js"></SCRIPT>
</HEAD>
<BODY text=#000000 vLink=#990000 link=#cc0000 bgColor=#ffffff leftMargin=0 
topMargin=0 MARGINHEIGHT="0" MARGINWIDTH="0">
<SCRIPT language=JavaScript><!--
controlloop.start();
//--></SCRIPT>

<CENTER>
<TABLE cellSpacing=0 cellPadding=0 width=776 border=0>
  <TBODY>
  <TR vAlign=top align=left>
    <TD vAlign=top align=left width=765 colSpan=5 height=77><IMG id=Picture83 
      height=77 src="Case History 58_files/banneroct2002.jpg" width=765 
    border=0></TD>
    <TD colSpan=2></TD></TR>
  <TR vAlign=top align=left>
    <TD width=20 height=7><IMG height=1 
      src="Case History 58_files/clearpixel.gif" width=20 border=0></TD>
    <TD width=23><IMG height=1 src="Case History 58_files/clearpixel.gif" 
      width=23 border=0></TD>
    <TD width=678><IMG height=1 src="Case History 58_files/clearpixel.gif" 
      width=678 border=0></TD>
    <TD width=31><IMG height=1 src="Case History 58_files/clearpixel.gif" 
      width=31 border=0></TD>
    <TD width=13><IMG height=1 src="Case History 58_files/clearpixel.gif" 
      width=13 border=0></TD>
    <TD width=1><IMG height=1 src="Case History 58_files/clearpixel.gif" 
      width=1 border=0></TD>
    <TD width=10><IMG height=1 src="Case History 58_files/clearpixel.gif" 
      width=10 border=0></TD></TR>
  <TR vAlign=top align=left>
    <TD width=766 colSpan=6 height=24><!--<IMG ID="DynamicMenu2501" HEIGHT=24 WIDTH=766 SRC="../../a_blank.gif" BORDER=0 ALT="DynamicMenu2 5.0">
                #DM2_controlloop# 1:coolPost:1--><NOLAYER>
      <DIV id=MBposcontrolloop 
      style="VISIBILITY: hidden; WIDTH: 766px; HEIGHT: 24px"></DIV></NOLAYER><ILAYER 
      id=MBposcontrolloopL VISIBILITY="hide" WIDTH="766" HEIGHT="24" 
      Z-INDEX="0"></ILAYER></TD>
    <TD></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=9></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=2></TD>
    <TD width=678>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#cc0000>Control Loop 
      Case History 58</FONT>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica>Problems in an interactive 
      combustion oil control system</FONT></B>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The author was 
      recently requested to investigate the control system for the combustion 
      oil feed to a furnace used in a manufacturing process.&nbsp; Oil is fed 
      into the furnace through various ports and the flow through each port is 
      individually adjusted via the setpoint on its controller.&nbsp; A 
      schematic of the system showing a few of the oil feeds is given in Figure 
      1. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture40 height=412 alt="Figure 1" 
            src="Case History 58_files/cashis58-1.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 1</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The oil feeds are 
      alternated approximately every 20 minutes between the opposite sides of 
      the furnace to avoid overheating of the furnace walls.&nbsp; The flow 
      controls are extremely important to keep temperature in the furnace 
      constant at the required temperature.
      <P>The system is inherently highly interactive.&nbsp; A change in the 
      pressure will affect the flows, and a change in an individual flow will 
      affect the pressure in the header and hence all the other flows.
      <P>There are only 2 ways to deal with interactive feedback systems.&nbsp; 
      The first way is to try and tune the individual loops in the system to 
      have minimum effect on each other, and the other way is to use decoupling 
      (or multivariable control).&nbsp; The latter method in essence employs 
      multiple feedforward controls to decouple the individual loops from each 
      other.&nbsp; This is generally not an option due to complexity and expense 
      on a system such as this.
      <P>Decoupling by tuning entails tuning the loops to react at different 
      speeds.&nbsp; Therefore one generally tries to tune the more important 
      loops fast and the less important slowly.&nbsp; In this case the flows are 
      important.&nbsp; However due to the fact that there are multiple flows, 
      which will all be directly affected by changes in pressure, it becomes 
      obvious that the pressure control is really vital, and if it can react to 
      changes as fast as possible to keep the pressure as constant as possible, 
      then there is a much better chance of being able to obtain overall good 
      flow control on the individual flow loops.&nbsp; Also due to the fact that 
      the individual flows are small in comparison with the total flow passing 
      through the pressure control valve, the individual flows will have a much 
      smaller interactive effect on the pressure than the pressure will have on 
      them.&nbsp; Therefore the way that one would go about tuning a system like 
      this is to tune the pressure controller fast and the individual flow 
      controllers slower.
      <P>Figure 2 shows part of the initial closed loop "as found" test on the 
      system. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture41 height=368 alt="Figure 2" 
            src="Case History 58_files/cashis58-2.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 2</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>Only 2 traces are 
      shown here, one being the oil header pressure, and the other being one of 
      the individual flows.&nbsp; A setpoint change has been made on the 
      pressure controller.&nbsp; It can be seen that the pressure is tuned 
      slowly and is reacting slowly, but the flow has been tuned extremely fast 
      and is very cyclic, in fact almost unstable.&nbsp; This is completely the 
      wrong way round.&nbsp; The test also shows how important the pressure 
      control is, as it has a direct and marked effect on the flow.
      <P>As mentioned many times in these articles, most people mistakenly 
      confuse optimisation of control loops with tuning.&nbsp; Tuning is the 
      generally the last process involved in optimisation.&nbsp; Generally 
      tuning blindly is useless, and is probably successful only about 25% of 
      the time.&nbsp; Proper optimisation examines all aspects of the system, 
      the individual loops, and the problems associated with their internal 
      components, and also involves gaining a full understanding of all these 
      points and of the requirements of the control.&nbsp; To this end, one 
      performs all sorts of tests and examinations before actually performing 
      the tuning.
      <P>This is well illustrated in this case as many problems were found in 
      the individual loops making up the system. A few of these will be shown 
      here.
      <P>The first case was in the pressure control loop which as mentioned 
      above is critically important for the success of the whole oil feed 
system.
      <P>Figure 3 illustrates an open loop test on the pressure, where the 
      controller is in manual and step-changes are being made in output. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture42 height=368 alt="Figure 3" 
            src="Case History 58_files/cashis58-3.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 3</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>It can be seen from 
      the figure that the there are major problems associated with the control 
      valve, which will mitigate against good control.
      <P>Firstly the size of the changes in the pressure resulting from the 
      changes being made in the controller output are about 5 times larger than 
      the size of the controller output changes.&nbsp; This means that the valve 
      is about 5 times oversized.&nbsp; Previous articles have detailed the 
      problems associated with oversized valves, but in essence the quality of 
      control is roughly degraded directly proportional to the amount of 
      oversizing. The ratio of the size of the steps is known as the process 
      gain or open loop gain ((PV/(PD).
      <P>Secondly one can see that the valve does not move immediately on a 
      reversal in the controller output signal, and in fact the output has to 
      move over 5% in a reverse direction, before the valve starts moving.&nbsp; 
      This is generally referred to as "valve hysteresis" which in actuality is 
      the combined effect of both true hysteresis incurred by static friction on 
      the valve stem, and deadband in the valve linkages.&nbsp; The overall 
      effect of hysteresis is to slow down the control quite substantially, 
      which again adversely affects the control variance.
      <P>Thirdly although the steps made in the controller output are all equal, 
      the size of the resultant steps in the controller output are not.&nbsp; 
      This is due to an incorrect inherent valve characteristic causing a 
      non-linear installed characteristic.&nbsp; This effectively means that the 
      process gain changes as the process variable moves over the measuring 
      range.&nbsp; Thus as the proportional gain in a controller must be set to 
      take the process gain into account, the tuning can be correct at only one 
      point in the measuring range.
      <P>On a process as important as this, where the flows can only be as good 
      as the pressure control, it is vital that all these points be corrected 
      before better control can be obtained.
      <P>Tests on the flow loops also revealed that most of the valves are in a 
      very sorry state.&nbsp; Figures 4 and 5 show tests on oil flow loop 4 and 
      5 respectively.&nbsp; In both of these tests one can see that the valves 
      can open quickly, but are terribly sluggish on closing.&nbsp; Both are 
      oversized, and suffer from bad hysteresis.&nbsp; (As a general rule, the 
      maximum acceptable hysteresis on a valve with positioner is 1%).
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture43 height=410 alt="Figure 4" 
            src="Case History 58_files/cashis58-4.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 4</FONT></B></DIV>
      <P align=center>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture44 height=410 alt="Figure 5" 
            src="Case History 58_files/cashis58-5.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 5</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The actual tuning of 
      all the loops was also way out.&nbsp; Bearing in mind that the tunings 
      will have to be recalculated once the valves are sorted out, and tuning 
      the pressure fast, and the flows relatively slowly, the tunings calculated 
      on the existing dynamics were:
      <P>Pressure Control
      <P>The as found tuning was:
      <P>P=100%,
      <P>I=100 seconds/repeat
      <P>D=1 second
      <P>In addition there was a 1 second filter in the controller and a 9.6 
      second filter on the transmitter. 
      <P>Much has been said about unnecessary filtering in previous articles, 
      and this is another example of lack of understanding of filtering.&nbsp; 
      There is certainly no need for any filters on this remarkably clean and 
      noise free signal as can be seen in Figure 3.&nbsp; In addition, the 
      ridiculously large integral used in the controller on a process with such 
      a fast response means that there is no way the control can deal speedily 
      with slow and smallish load changes.&nbsp; It really is extremely bad 
      tuning.
      <P>The desired tuning as calculated by the Protuner loop analyser and 
      taking into account the large hysteresis, is as follows.&nbsp; (One tries 
      to use a tuning with minimal overshoot on loops with unacceptable valve 
      hysteresis to avoid unnecessary reversing of the valve, because every time 
      the valve has to be reversed, the controller output has to move through 
      the hysteresis band before the valve starts moving in the opposite 
      direction).
      <P>P=1,300%,
      <P>I=2.1 seconds/repeat
      <P>No D term or filtering is required.
      <P>Unfortunately another adverse effect of oversized valves is that the 
      gain in the controller must be reduced proportionally, and many 
      controllers on the market cut off their low end gain at about 0.1 or 1000% 
      proportional band. This was the case with the controllers in use in this 
      plant, so the biggest proportional band that could be inserted in the 
      controller was 999%. This is a little too cyclic for this application, but 
      it had to do.
      <P>Flow Controls
      <P>The following settings are typical of those inserted in most of the oil 
      flow controllers in the system.
      <P>The as found tuning was:
      <P>P=80%,
      <P>I=14 seconds/repeat
      <P>In addition there was a 1 second filter in the controller and a 9.6 
      second filter on the transmitter. 
      <P>Again with the oversized and hysteresis plagued valves, the best tuning 
      that could be used was:
      <P>P=999%,
      <P>I=1.3 seconds/repeat
      <P>No filtering is required.
      <P>One would like to have made the proportional band considerably bigger 
      to slow the tuning down in view of the interaction, but again this was 
      prevented by the limited proportional band range in the controller.
      <P></FONT><A 
      href="index.html"><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>Index to articles</FONT></A>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#000000 
      size=-2>Michael Brown is a specialist in control loop optimisation, with 
      many years of experience in process control instrumentation. His main 
      activities are consulting, and teaching practical control loop analysis 
      and optimisation. He gives training courses which can be held in clients' 
      plants, where students can have the added benefit of practising on live 
      loops. His work takes him to plants all over South Africa, and also to 
      other countries. He can be contacted at: <BR>Tel (011) 486-0567<BR>Fax 
      (011) 646-2385<BR>E-Mail: </FONT><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2></FONT></B><A href="mailto:michael.brown@pixie.co.za"><B><FONT 
      face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>michael.brown@pixie.co.za</FONT></B></A><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>&nbsp; </FONT></P></TD>
    <TD colSpan=4></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=19></TD></TR>
  <TR vAlign=top align=left>
    <TD height=19></TD>
    <TD width=732 colSpan=3>
      <TABLE id=NavigationBar1 cellSpacing=0 cellPadding=1 width=732 border=0>
        <TBODY>
        <TR vAlign=top align=left>
          <TD width=120><A onmouseover="F_roll('NavigationButton25',1)" 
            onmouseout="F_roll('NavigationButton25',0)" 
            href="http://www.controlloop.co.za/default.htm"><IMG 
            id=NavigationButton25 height=19 alt=Home 
            src="Case History 58_files/Home_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Home_NRGUIButtonOver.GIF')" border=0 
            name=NavigationButton25></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton26',1)" 
            onmouseout="F_roll('NavigationButton26',0)" 
            href="http://www.controlloop.co.za/Training/training.htm"><IMG 
            id=NavigationButton26 height=19 alt=Training 
            src="Case History 58_files/Training_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Training_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton26></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton27',1)" 
            onmouseout="F_roll('NavigationButton27',0)" 
            href="http://www.controlloop.co.za/Consulting/consulting.htm"><IMG 
            id=NavigationButton27 height=19 alt=Consulting 
            src="Case History 58_files/Consulting_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Consulting_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton27></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton28',1)" 
            onmouseout="F_roll('NavigationButton28',0)" 
            href="http://www.controlloop.co.za/Protuner/protuner.htm"><IMG 
            id=NavigationButton28 height=19 alt=Protuner 
            src="Case History 58_files/Protuner_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Protuner_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton28></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton29',1)" 
            onmouseout="F_roll('NavigationButton29',0)" 
            href="http://www.controlloop.co.za/Contact_us/contact_us.htm"><IMG 
            id=NavigationButton29 height=19 alt="Contact us" 
            src="Case History 58_files/Contact_us_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Contact_us_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton29></A></TD>
          <TD width=120 height=19><A 
            onmouseover="F_roll('NavigationButton30',1)" 
            onmouseout="F_roll('NavigationButton30',0)" 
            href="http://www.controlloop.co.za/Articles/articles.htm"><IMG 
            id=NavigationButton30 height=19 alt=Articles 
            src="Case History 58_files/Articles_HGUIButtonOn.gif" width=120 
            onload="F_loadRollover(this,'Articles_HRGUIButtonOnOver.GIF')" 
            border=0 name=NavigationButton30></A></TD></TR></TBODY></TABLE><!--WEBBOT bot="HTMLMarkup" startspan ALT="Site Meter" --><A 
      href="http://sm6.sitemeter.com/stats.asp?site=sm6controleng" 
      target=_top><IMG alt="Site Meter" src="Case History 58_files/meter.gif" 
      border=0></A> <!--WEBBOT bot="HTMLMarkup" Endspan --></TD>
    <TD colSpan=3></TD></TR></TBODY></TABLE></CENTER></BODY></HTML>
