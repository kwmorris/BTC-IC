<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0073)http://www.controlloop.co.za/Articles/Case_History_57/case_history_57.htm -->
<HTML><HEAD><TITLE>Case History 57</TITLE>
<META http-equiv=Content-Type content="text/html; charset=ISO-8859-1">
<META content="MSHTML 6.00.2600.0" name=GENERATOR>
<SCRIPT language=JavaScript src="Case History 57_files/menu.js"></SCRIPT>

<SCRIPT language=JavaScript>
<!--
var controlloop = new MenuBar("controlloop",0,2,0,0,1,1,0,"solid","#CCCCCC","#CCCCCC","#999999","Verdana,Tahoma,Arial,Helvetica",12,"normal","normal","#000000","#FFFFFF","");
var m1_controlloop = new Menu("Home",127,100,"../../default.htm");
controlloop.addMenu(m1_controlloop);
var m2_controlloop = new Menu("Training",127,100,"../../Training/training.htm");
controlloop.addMenu(m2_controlloop);
var m3_controlloop = new Menu("Consulting",127,100,"../../Consulting/consulting.htm");
controlloop.addMenu(m3_controlloop);
var m4_controlloop = new Menu("Protuner",127,100,"../../Protuner/protuner.htm");
controlloop.addMenu(m4_controlloop);
var m5_controlloop = new Menu("Contact us",127,100,"../../Contact_us/contact_us.htm");
controlloop.addMenu(m5_controlloop);
var m6_controlloop = new Menu("Articles",130,100,"../../Articles/articles.htm");
controlloop.addMenu(m6_controlloop);
//-->
</SCRIPT>

<SCRIPT>
<!--
function F_loadRollover(){} function F_roll(){}
//-->
</SCRIPT>

<SCRIPT language=JavaScript1.2 src="Case History 57_files/rollover.js"></SCRIPT>
</HEAD>
<BODY text=#000000 vLink=#990000 link=#cc0000 bgColor=#ffffff leftMargin=0 
topMargin=0 MARGINHEIGHT="0" MARGINWIDTH="0">
<SCRIPT language=JavaScript><!--
controlloop.start();
//--></SCRIPT>

<CENTER>
<TABLE cellSpacing=0 cellPadding=0 width=776 border=0>
  <TBODY>
  <TR vAlign=top align=left>
    <TD vAlign=top align=left width=765 colSpan=5 height=77><IMG id=Picture83 
      height=77 src="Case History 57_files/banneroct2002.jpg" width=765 
    border=0></TD>
    <TD colSpan=2></TD></TR>
  <TR vAlign=top align=left>
    <TD width=20 height=7><IMG height=1 
      src="Case History 57_files/clearpixel.gif" width=20 border=0></TD>
    <TD width=23><IMG height=1 src="Case History 57_files/clearpixel.gif" 
      width=23 border=0></TD>
    <TD width=677><IMG height=1 src="Case History 57_files/clearpixel.gif" 
      width=677 border=0></TD>
    <TD width=32><IMG height=1 src="Case History 57_files/clearpixel.gif" 
      width=32 border=0></TD>
    <TD width=13><IMG height=1 src="Case History 57_files/clearpixel.gif" 
      width=13 border=0></TD>
    <TD width=1><IMG height=1 src="Case History 57_files/clearpixel.gif" 
      width=1 border=0></TD>
    <TD width=10><IMG height=1 src="Case History 57_files/clearpixel.gif" 
      width=10 border=0></TD></TR>
  <TR vAlign=top align=left>
    <TD width=766 colSpan=6 height=24><!--<IMG ID="DynamicMenu2501" HEIGHT=24 WIDTH=766 SRC="../../a_blank.gif" BORDER=0 ALT="DynamicMenu2 5.0">
                #DM2_controlloop# 1:coolPost:1--><NOLAYER>
      <DIV id=MBposcontrolloop 
      style="VISIBILITY: hidden; WIDTH: 766px; HEIGHT: 24px"></DIV></NOLAYER><ILAYER 
      id=MBposcontrolloopL VISIBILITY="hide" WIDTH="766" HEIGHT="24" 
      Z-INDEX="0"></ILAYER></TD>
    <TD></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=10></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=2></TD>
    <TD width=677>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#cc0000>Control Loop 
      Case History 57</FONT>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica>Problems in a gas mixing 
      system</FONT></B>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>During a recent 
      control course presented in a South African continuous process plant, part 
      of the practical work was spent in optimising a hydrogen/nitrogen gas 
      mixing system.&nbsp; 
      <P>A schematic of the mixing system is shown in Figure 1.&nbsp; 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture40 height=412 alt="Figure 1" 
            src="Case History 57_files/cashis57-1.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 1</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The hydrogen and 
      nitrogen are to be combined in an approximate ratio of 1:10.&nbsp;&nbsp; 
      Hydrogen is fed into an accumulator via a pressure reducing control 
      system.&nbsp; The nitrogen also passes though a pressure reducing control 
      system, but immediately after that it is passed through a flow control 
      system, and from there into an accumulator.
      <P>A strategy of passing fluids firstly through a pressure control system 
      and then immediately into a flow control is something that one finds in 
      many plants, and it certainly never ceases to amaze me, because it cannot 
      work.&nbsp; Firstly, close coupled pressure and flow controls are highly 
      interactive, and secondly they are trying to defy the natural gas 
      laws.&nbsp; Obviously you can only control either the pressure or the 
      flow. Movement of either of the valves is going to upset the other 
      control.&nbsp; In general, for this strategy to work, one must have a 
      large capacity of gas between the pressure and flow valves.&nbsp; For 
      example if they had put the flow controller downstream of the 
      nitrogen/hydrogen mixture accumulator it might have worked, but as will be 
      seen below it was also silly because there is a manual control of flow 
      further downstream.
      <P>The hydrogen was introduced into the nitrogen downstream from the flow 
      control valve and before the mixture accumulator via a mixture control 
      valve.&nbsp; An on-line hydrogen/nitrogen mixture analyser sampled the gas 
      downstream from the mixture accumulator.&nbsp; Its signal was fed into a 
      mixture controller which controlled the amount of hydrogen flowing into 
      the mixture.
      <P>The gas was then fed into various points on the process via 
      "rotameters" (variable area flow meters) with integral manual regulating 
      valves.
      <P>Plant operators experienced difficulty in setting up the flow through 
      the individual rotameters for as soon as they adjusted the flow in one it 
      upset the flows in the others. The flow rates through the individual 
      rotameters do need to be adjusted on a fairly regular basis depending on 
      the product being manufactured in the plant at that time.
      <P>When one wishes to control a system like this, it is important to look 
      firstly at the control requirements and then to try and satisfy these 
      requirements keeping interaction to the minimum.&nbsp; The main 
      requirements in this case are to introduce hydrogen and nitrogen into the 
      process at the correct percentage mix, to allow the operators to set up 
      the individual flows through the rotameters without them interfering with 
      each other, and of course to keep these flow rates constant.
      <P>To satisfy the last two requirements it is necessary to keep the 
      pressure in the header feeding the rotameters as constant as 
      possible.&nbsp; Bearing in mind that the nitrogen flow is approximately 10 
      times larger than that of the hydrogen, it becomes apparent that the 
      control of the nitrogen pressure is far more important than nitrogen flow 
      or hydrogen pressure. It was found on testing, that the nitrogen flow 
      controller had been tuned fairly fast and the pressure controller 
      detuned.&nbsp; The way the system had been set up with the nitrogen flow 
      control as the fast loop was causing the interaction on the 
      rotameters.&nbsp; As soon as the operators changed the flow on the one, 
      the flow controller would then compensate by passing different rates 
      through the other rotameters to keep the total flow constant.
      <P>The first important thing that had to be done to optimise the system is 
      to take the nitrogen flow control out of the system.&nbsp; This is easily 
      done by placing the controller in manual.&nbsp; The output of this 
      controller was gradually increased to a maximum to open the valve fully, 
      and keep the pressure drop across it to a minimum.&nbsp; If one wants to 
      keep the pressure on the rotameters' header constant, it is not good to 
      have pressure drops upstream as they will vary with flow.&nbsp; (There is 
      a possibility that that the best place to situate the tap to the nitrogen 
      pressure transmitter would in fact be downstream of the mixture 
      accumulator, but it may also adversely increase interactive effects.&nbsp; 
      Unfortunately it was not possible to experiment with this in the plant at 
      the time).
      <P>Now the next thing is to determine the location and magnitude of 
      interactive effects in the system.&nbsp; To do this one must use a 
      multi-channel recorder and monitor all the inputs&nbsp; and outputs of the 
      various processes that could interact.&nbsp; In this case 6 channels were 
      required to record the input and outputs of the nitrogen pressure 
      controller, the hydrogen pressure controller, and the mixture 
      controller.&nbsp; All 3 controllers are then placed in manual, and step 
      changes in the output of each are made sequentially to observe the effects 
      on the inputs (process variables) of all 3 loops.&nbsp; 
      <P>The results of these tests were that both the nitrogen and hydrogen 
      pressures affected the mixture as could be expected. However changes on 
      the mixture controller affected the hydrogen pressure but had negligible 
      effect on the nitrogen pressure.
      <P>Bearing these effects in mind, and also that load changes in the system 
      would be negligible, then the tuning strategy would be to tune the 
      nitrogen and hydrogen controllers as fast as possible and tune the mixture 
      controller slowly to minimise its interaction with the hydrogen control.
      <P>Before starting the optimisation of the various individual loops, it is 
      also essential that one fully understands all aspects of the controllers 
      used and what options are available.&nbsp; Previous articles have dealt 
      exhaustively with this important subject.&nbsp; In this case the plant is 
      using sophisticated European made multi-loop stand-alone 
      controllers.&nbsp; These controllers are extremely complex with a huge 
      range of options and configurations.&nbsp; Unfortunately, even though 
      written in English, and just like many other makes of controllers, the 
      manuals are almost impossible to understand.&nbsp; How manufacturers of 
      such sophisticated equipment ever expect their users to understand their 
      controllers is beyond me.&nbsp; Even people with a great deal of knowledge 
      of controllers are often unable to find their way through and understand 
      the manuals.&nbsp; Very often the local agents also have very little 
      knowledge, and one often has to phone the overseas manufacturer to find 
      someone who can assist.
      <P>In this case it took several hours of searching through numerous 
      volumes of a library of manuals on the controllers, before one could 
      collate the more essential details required to understand the basic 
      essentials of the controller's operation.&nbsp; Even after finding this 
      information, it took several hours to actually find out how and where to 
      implement required changes in the controllers' software.
      <P>One point of interest is that the default configuration of the 
      controller is set by the manufacturer so that only integral action results 
      on set-point change.&nbsp; The controller does however react to load 
      changes with full P, I &amp; D (if used) action.&nbsp; Now although there 
      was in fact a paragraph on this in the manual in an obscure part of the 
      manual, it does not say this is the default, and certainly no one has ever 
      informed the plant I&amp;C personnel about this fact.&nbsp; This is vital 
      knowledge, because firstly it is impossible to tune a controller properly 
      with this setting, because every time one tries to test the response you 
      only get I action, and secondly even though a slow response to setpoint is 
      often desirable to minimise bumping the process, there are processes where 
      the operators do make setpoint changes and want a fast response.&nbsp; It 
      is essential when tuning controllers and to judge control responses, that 
      the controller be configured so that one can see the P and D (if used) 
      actions, as well as the I action when responding to set-point changes.
      <P>It is extremely interesting to realise that because of the default 
      setting in the controllers, that not one loop in the whole plant using 
      this controller could ever have been tuned properly, and that no one in 
      the plant was aware of this.&nbsp; This is not only the case in this 
      plant, but in nearly every other plant I have been in using controllers 
      with this configuration.&nbsp; This reflects badly on the education system 
      of institutions teaching control, and also on controller manufacturers who 
      cannot be bothered to point out a simple fact like this in their manuals 
      or to train people properly on the use of their controllers.
      <P>The hydrogen pressure control loop was optimised first.&nbsp; Although 
      there was no noise on the process variable the transmitter had been 
      configured with a 5 second filter and the input on the controller with a 1 
      second filter.&nbsp; These are completely unnecessary and will only affect 
      the control adversely (see previous articles on filters).&nbsp; Figure 2 
      shows the response to a setpoint change with the original tuning and with 
      the filters still in the system. 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture41 height=410 alt="Figure 2" 
            src="Case History 57_files/cashis57-2.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 2</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The tuning had a 
      proportional band of 200%, an integral of 1 minute/repeat, and a 
      derivative of 1 second.&nbsp; The response with these settings was 
      extremely slow with a big overshoot taking over 12 minutes to respond to a 
      10% setpoint change.&nbsp; 
      <P>With the new tuning with a proportional band of 35%, and an integral of 
      3,75 minutes/repeat, and no filters, the response was improved to 90 
      seconds.&nbsp; This is shown in Figure 3.
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture42 height=410 alt="Figure 3" 
            src="Case History 57_files/cashis57-3.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 3</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The nitrogen pressure 
      loop was then optimised.&nbsp; Its response after tuning was about 10 
      times faster and better than the as-found tuning.&nbsp; The original 
      response was also very slow and cyclic taking a&nbsp; long time to 
      stabilise.
      <P>Finally the hydrogen/nitrogen mixture control loop was optimised.&nbsp; 
      As mentioned earlier this loop will interact with the hydrogen control. To 
      decouple interactive loops by tuning, one must be tuned fast, and the 
      other slow.&nbsp; In this case the hydrogen pressure was tuned fast, so it 
      was necessary to keep the mixture control's tuning relatively slow.
      <P>The original as-found tuning was in fact terrible.&nbsp; After making a 
      5% setpoint change, the mixture had not even reached the new setpoint when 
      the test was abandoned some 10 minutes later, see Figure 4.&nbsp; 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture43 height=410 alt="Figure 4" 
            src="Case History 57_files/cashis57-4.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 4</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The response with the 
      new tuning which we consider slow is shown in Figure 5.&nbsp; 
      <P align=center></FONT>
      <DIV align=center>
      <TABLE cellSpacing=0 cellPadding=0 width=550 border=0>
        <TBODY>
        <TR>
          <TD><IMG id=Picture44 height=410 alt="Figure 5" 
            src="Case History 57_files/cashis57-5.gif" width=550 
        border=0></TD></TR></TBODY></TABLE></DIV>
      <DIV align=center><B><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>Figure 5</FONT></B></DIV>
      <P><FONT face=Verdana,Tahoma,Arial,Helvetica size=-1>The response to the 
      change was now completed in 3 minutes, and had little effect on the 
      hydrogen pressure.
      <P>The mixture control is now running a lot better.&nbsp; There was 
      however a lot of resistance on the part of the process operators to the 
      fact that the hydrogen flow controller was now out of the circuit.&nbsp; 
      It is very important that the process people also be included in the 
      decision making when optimising a system, and that the reason for changes 
      be explained carefully.
      <P></FONT><A 
      href="index.html"><FONT 
      face=Verdana,Tahoma,Arial,Helvetica size=-1>Index to articles</FONT></A>
      <P><B><FONT face=Verdana,Tahoma,Arial,Helvetica color=#000000 
      size=-2>Michael Brown is a specialist in control loop optimisation, with 
      many years of experience in process control instrumentation. His main 
      activities are consulting, and teaching practical control loop analysis 
      and optimisation. He gives training courses which can be held in clients' 
      plants, where students can have the added benefit of practising on live 
      loops. His work takes him to plants all over South Africa, and also to 
      other countries. He can be contacted at: <BR>Tel (011) 486-0567<BR>Fax 
      (011) 646-2385<BR>E-Mail: </FONT><FONT face=Verdana,Tahoma,Arial,Helvetica 
      size=-2></FONT></B><A href="mailto:michael.brown@pixie.co.za"><B><FONT 
      face=Verdana,Tahoma,Arial,Helvetica 
      size=-2>michael.brown@pixie.co.za</FONT></B></A></P></TD>
    <TD colSpan=4></TD></TR>
  <TR vAlign=top align=left>
    <TD colSpan=7 height=19></TD></TR>
  <TR vAlign=top align=left>
    <TD height=19></TD>
    <TD width=732 colSpan=3>
      <TABLE id=NavigationBar1 cellSpacing=0 cellPadding=1 width=732 border=0>
        <TBODY>
        <TR vAlign=top align=left>
          <TD width=120><A onmouseover="F_roll('NavigationButton19',1)" 
            onmouseout="F_roll('NavigationButton19',0)" 
            href="http://www.controlloop.co.za/default.htm"><IMG 
            id=NavigationButton19 height=19 alt=Home 
            src="Case History 57_files/Home_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Home_NRGUIButtonOver.GIF')" border=0 
            name=NavigationButton19></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton20',1)" 
            onmouseout="F_roll('NavigationButton20',0)" 
            href="http://www.controlloop.co.za/Training/training.htm"><IMG 
            id=NavigationButton20 height=19 alt=Training 
            src="Case History 57_files/Training_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Training_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton20></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton21',1)" 
            onmouseout="F_roll('NavigationButton21',0)" 
            href="http://www.controlloop.co.za/Consulting/consulting.htm"><IMG 
            id=NavigationButton21 height=19 alt=Consulting 
            src="Case History 57_files/Consulting_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Consulting_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton21></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton22',1)" 
            onmouseout="F_roll('NavigationButton22',0)" 
            href="http://www.controlloop.co.za/Protuner/protuner.htm"><IMG 
            id=NavigationButton22 height=19 alt=Protuner 
            src="Case History 57_files/Protuner_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Protuner_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton22></A></TD>
          <TD width=120><A onmouseover="F_roll('NavigationButton23',1)" 
            onmouseout="F_roll('NavigationButton23',0)" 
            href="http://www.controlloop.co.za/Contact_us/contact_us.htm"><IMG 
            id=NavigationButton23 height=19 alt="Contact us" 
            src="Case History 57_files/Contact_us_NGUIButton.gif" width=120 
            onload="F_loadRollover(this,'Contact_us_NRGUIButtonOver.GIF')" 
            border=0 name=NavigationButton23></A></TD>
          <TD width=120 height=19><A 
            onmouseover="F_roll('NavigationButton24',1)" 
            onmouseout="F_roll('NavigationButton24',0)" 
            href="http://www.controlloop.co.za/Articles/articles.htm"><IMG 
            id=NavigationButton24 height=19 alt=Articles 
            src="Case History 57_files/Articles_HGUIButtonOn.gif" width=120 
            onload="F_loadRollover(this,'Articles_HRGUIButtonOnOver.GIF')" 
            border=0 name=NavigationButton24></A></TD></TR></TBODY></TABLE><!--WEBBOT bot="HTMLMarkup" startspan ALT="Site Meter" --><A 
      href="http://sm6.sitemeter.com/stats.asp?site=sm6controleng" 
      target=_top><IMG alt="Site Meter" src="Case History 57_files/meter.gif" 
      border=0></A> <!--WEBBOT bot="HTMLMarkup" Endspan --></TD>
    <TD colSpan=3></TD></TR></TBODY></TABLE></CENTER></BODY></HTML>
